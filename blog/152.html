<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>Darwin Video Streaming</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    
        <link rel="canonical" href="http://www.mindcollapse.com/blog/152.html">

        <meta property="og:title" content="Darwin Video Streaming">
        <meta property="og:description" content="За­каз­чик из да­ле­кой стра­ны по­бе­див­ше­го ка­пи­та­лиз­ма за­ка­зал про­ект в осно­ве ко­то­ро­го ле­жа­ла идея про­да­жи аудио и ви­део кон­тен­та че­рез он­лайн ве­ща­ние для мо­биль­ных те­ле­фо­нов в фор­ма­те 3gp для ви­део ли­бо mp3 для аудио. Поль­зо­ва­тель сам за­ка­зы­ва­ет му­зы­ку ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="http://www.mindcollapse.com/blog/152.html">

        <meta name="description" content="За­каз­чик из да­ле­кой стра­ны по­бе­див­ше­го ка­пи­та­лиз­ма за­ка­зал про­ект в осно­ве ко­то­ро­го ле­жа­ла идея про­да­жи аудио и ви­део кон­тен­та ...">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="За­каз­чик из да­ле­кой стра­ны по­бе­див­ше­го ка­пи­та­лиз­ма за­ка­зал про­ект в осно­ве ко­то­ро­го ле­жа­ла идея про­да­жи аудио и ви­део кон­тен­та че­рез он­лайн ве­ща­ние для мо­биль­ных ...">
        <meta name="twitter:title" content="Darwin Video Streaming">
    

    <link rel="author" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="http://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/rss+xml" title="RSS лента mindcollapse.com" href="http://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?170eb2ce" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" src="/static/compiled/blog.js?8c129fd3" defer></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <div class="container">

        <div class="header navbar navbar-default hidden-print" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </div>

            <div class="collapse navbar-collapse blogmenu">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                    <li><a target="_blank" href="/moho/">Кино</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="http://www.twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="http://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </div>
        </div>

        
	<div class="article" id="post_" itemscope itemtype="http://schema.org/BlogPosting">
		<div class="content_header clearfix">
			<h1 itemprop="name" class="pull-left">Darwin Video Streaming</h1>
			<div class="published pull-right"><span class="text-muted">30 сентября 2008 г.</span></div>
		</div>

		<hr class="first">

		<div itemprop="articleBody" class="content">
			За&shy;каз&shy;чик из да&shy;ле&shy;кой стра&shy;ны по&shy;бе&shy;див&shy;ше&shy;го ка&shy;пи&shy;та&shy;лиз&shy;ма за&shy;ка&shy;зал про&shy;ект в осно&shy;ве ко&shy;то&shy;ро&shy;го ле&shy;жа&shy;ла идея про&shy;да&shy;жи аудио и ви&shy;део кон&shy;тен&shy;та че&shy;рез он&shy;лайн ве&shy;ща&shy;ние для мо&shy;биль&shy;ных те&shy;ле&shy;фо&shy;нов в фор&shy;ма&shy;те 3gp для ви&shy;део ли&shy;бо mp3 для аудио. Поль&shy;зо&shy;ва&shy;тель сам за&shy;ка&shy;зы&shy;ва&shy;ет му&shy;зы&shy;ку че&shy;рез смс и по&shy;лу&shy;ча&shy;ет со&shy;об&shy;ще&shy;ние с ссыл&shy;кой, по ко&shy;то&shy;рой, по&shy;тея от не&shy;тер&shy;пе&shy;ния, мо&shy;жет по&shy;смот&shy;реть лю&shy;би&shy;мый клип с го&shy;во&shy;ря&shy;щи&shy;ми не&shy;гра&shy;ми, гру&shy;да&shy;сты&shy;ми пры&shy;га&shy;ю&shy;щи&shy;ми блон&shy;дин&shy;ка&shy;ми и про&shy;чей вто&shy;ро&shy;сорт&shy;ной пи&shy;щей. Нам, че&shy;ло&shy;ве&shy;кам, ко&shy;то&shy;рые зна&shy;чок © ста&shy;вят толь&shy;ко пон&shy;та ра&shy;ди и счи&shy;та&shy;ют, что сло&shy;во&shy;со&shy;че&shy;та&shy;ние "ав&shy;тор&shy;ские пра&shy;ва" ро&shy;дом из па&shy;дон&shy;ков&shy;ско&shy;го диа&shy;лек&shy;та, по&shy;доб&shy;но&shy;го рас&shy;то&shy;чи&shy;тель&shy;ства не по&shy;нять, но за пя&shy;тью мо&shy;ря&shy;ми сот&shy;ни по&shy;доб&shy;ных сер&shy;ви&shy;сов со&shy;би&shy;ра&shy;ют не&shy;пло&shy;хие де&shy;неж&shy;ные сбе&shy;ре&shy;же&shy;ния для бо&shy;га&shy;той и обес&shy;пе&shy;чен&shy;ной ста&shy;ро&shy;сти со&shy;зда&shy;те&shy;лей. Это та&shy;кая се&shy;бе на&shy;вод&shy;ка из се&shy;рии "как за&shy;ра&shy;бо&shy;тать се&shy;бе на жизнь", в ко&shy;то&shy;рой я уже по&shy;пи&shy;сы&shy;вал про <a href="/blog/133.html">GPS</a> и <a href="/blog/137.html">Wi-Fi</a>. Все, как во всех ска&shy;зоч&shy;ных ис&shy;то&shy;ри&shy;ях, на&shy;ча&shy;лось с по&shy;ис&shy;ка opensource streaming сер&shy;ве&shy;ра. До это&shy;го я од&shy;на&shy;жды уста&shy;нав&shy;ли&shy;вал <a href="http://www.videolan.org/vlc/">VLC</a> для ре&shy;транс&shy;ля&shy;ции па&shy;ры де&shy;биль&shy;ных кли&shy;пов че&shy;рез http, что до&shy;став&shy;ля&shy;ло не&shy;ма&shy;ло удо&shy;воль&shy;ствия для за&shy;каз&shy;чи&shy;ка, но 3gp дан&shy;ный сер&shy;вер не под&shy;дер&shy;жи&shy;вал, по&shy;это&shy;му ва&shy;ри&shy;ант мо&shy;мен&shy;таль&shy;но от&shy;пал. По&shy;гуглив, я на&shy;ткнул&shy;ся на бес&shy;плат&shy;ный про&shy;ект ав&shy;тор&shy;ства <a href="http://apple.com">Apple</a> с на&shy;зва&shy;ни&shy;ем <a href="http://dss.macosforge.org/">Darwin</a>, ко&shy;то&shy;рое, меж&shy;ду про&shy;чим, но&shy;сит еще и их OS для их су&shy;пер&shy;тон&shy;ких, су&shy;пер&shy;а&shy;лю&shy;ми&shy;ни&shy;е&shy;вых, су&shy;пер&shy;до&shy;ро&shy;гих и во&shy;об&shy;ще су&shy;пер&shy;су&shy;пер&shy;ных ком&shy;пью&shy;те&shy;ров, ко&shy;то&shy;рые моя вро&shy;жден&shy;ная прак&shy;тич&shy;ность, гра&shy;ни&shy;ча&shy;щая с жлоб&shy;ством и ску&shy;пер&shy;дяй&shy;ством, не поз&shy;во&shy;ля&shy;ет ку&shy;пить. Кста&shy;ти, все ре&shy;ли&shy;зы (кро&shy;ме по&shy;след&shy;не&shy;го) сер&shy;ве&shy;ра <a href="http://dss.macosforge.org/post/41/">до&shy;ступ&shy;ны для ска&shy;чи&shy;ва&shy;ния</a>, как для MacOS, так и для Solaris, Linux и да&shy;же Windows. Уста&shy;но&shy;ви&shy;лось все на centos эле&shy;мен&shy;тар&shy;но: рас&shy;па&shy;ко&shy;вы&shy;ва&shy;ем ар&shy;хив, за&shy;пус&shy;ка&shy;ем Install скрипт, вво&shy;дим имя и па&shy;роль ад&shy;ми&shy;ни&shy;стра&shy;то&shy;ра и по&shy;лу&shy;ча&shy;ем го&shy;то&shy;вый, ра&shy;бо&shy;та&shy;ю&shy;щий каст-сер&shy;вер. Итак, все кон&shy;фи&shy;ги ле&shy;жат по&shy;сле уста&shy;нов&shy;ки по ад&shy;ре&shy;су /etc/streaming/&nbsp;в удоб&shy;ном для ре&shy;дак&shy;ти&shy;ро&shy;ва&shy;ния фор&shy;ма&shy;те XML. Нас ин&shy;те&shy;ре&shy;су&shy;ют файл streamingserver.xml, где мы из&shy;ме&shy;ня&shy;ем па&shy;ра&shy;мет&shy;ры movie_folder на ди&shy;рек&shy;то&shy;рию, в ко&shy;то&shy;рую бу&shy;дем ко&shy;пи&shy;ро&shy;вать фай&shy;лы для про&shy;смот&shy;ра (не за&shy;будь&shy;те chown qtss), bind_ip_addr для сер&shy;ве&shy;ров с не&shy;сколь&shy;ки&shy;ми IP, в rtsp_port уда&shy;ля&shy;ем порт 8000 и 8001, если вам не нуж&shy;на транс&shy;ля&shy;ция че&shy;рез http. Не за&shy;бы&shy;ва&shy;ем до&shy;ба&shy;вить пор&shy;ты tcp 554 и 7070 (для rtsp) , а так же 1220 для web-ин&shy;тер&shy;фей&shy;са ад&shy;ми&shy;ни&shy;стра&shy;то&shy;ра в ACCEPT фа&shy;ер&shy;во&shy;ла. Да&shy;лее все про&shy;сто, по&shy;тен&shy;ци&shy;аль&shy;ный лю&shy;би&shy;тель го&shy;ло&shy;са Брит&shy;ни от&shy;прав&shy;ля&shy;ет sms с ко&shy;дом кли&shy;па, ко&shy;то&shy;рое об&shy;ра&shy;ба&shy;ты&shy;ва&shy;ет sms gateway-ем (от&shy;дель&shy;ная ин&shy;те&shy;рес&shy;ная ис&shy;то&shy;рия) по&shy;сле че&shy;го же&shy;ла&shy;е&shy;мый файл ко&shy;пи&shy;ру&shy;ет&shy;ся в ди&shy;рек&shy;то&shy;рию /usr/local/movies/, а ссыл&shy;ка ти&shy;па rtsp://serverwithdarwin.com/sdflsdfa798/britney_spears_stronger.3gp вы&shy;сы&shy;ла&shy;ет&shy;ся поль&shy;зо&shy;ва&shy;те&shy;лю и мо&shy;жет быть про&shy;игра&shy;на, как в де&shy;фолт&shy;ном но&shy;ки&shy;ев&shy;ском пле&shy;е&shy;ре, так и в windows media player mobile и на&shy;вер&shy;ное во всех осталь&shy;ных то&shy;же. По ис&shy;те&shy;че&shy;нию 2-х ча&shy;сов файл уда&shy;ля&shy;ет&shy;ся cron-ом. Пре&shy;иму&shy;ще&shy;ства транс&shy;ля&shy;ции пе&shy;ред предо&shy;став&shy;ле&shy;ни&shy;ем ссыл&shy;ки на файл оче&shy;вид&shy;ны: на&shy;мно&shy;го мень&shy;ше нуж&shy;но пла&shy;тить за ли&shy;цен&shy;зию, а жад&shy;ные де&shy;ти мо&shy;гут за&shy;ка&shy;зы&shy;вать ссыл&shy;ки на один и тот же клип по не&shy;сколь&shy;ко раз, Брит&shy;ни она ведь та&shy;кая. К то&shy;му же че&shy;рез Darwin мож&shy;но раз&shy;да&shy;вать и mp3 фай&shy;лы со&shy;вер&shy;шен&shy;но не па&shy;рясь с из&shy;ме&shy;не&shy;ни&shy;ем на&shy;стро&shy;ек. Со&shy;хра&shy;нить дан&shy;ные из по&shy;то&shy;ка на&shy;мно&shy;го слож&shy;нее, чем обыч&shy;ный файл, а на мо&shy;биль&shy;ном устрой&shy;стве, фак&shy;ти&shy;че&shy;ски, не&shy;воз&shy;мож&shy;но. Од&shy;ним сло&shy;вом, Apple сде&shy;ла&shy;ли по на&shy;сто&shy;я&shy;ще&shy;му не&shy;пло&shy;хой про&shy;ект, ко&shy;то&shy;рый и за день&shy;ги не жал&shy;ко бы&shy;ло бы ку&shy;пить, а за&shy;дар&shy;ма - грех не ис&shy;поль&shy;зо&shy;вать. Я, в знак бла&shy;го&shy;дар&shy;но&shy;сти (хо&shy;тя сра&shy;ли они там на ме&shy;ня), да&shy;же ре&shy;шил об&shy;но&shy;вить свой ста&shy;рень&shy;кий <a href="http://www.engadget.com/2006/09/12/2g-nano-announced/">Nano 2G</a>, с ко&shy;то&shy;рым бе&shy;гаю уже ров&shy;но 2 го&shy;да и ко&shy;то&shy;рый ни ра&shy;зу ме&shy;ня не под&shy;во&shy;дил, на по&shy;след&shy;нее по&shy;ко&shy;ле&shy;ние это&shy;го же <a href="http://www.apple.com/ipodnano/">Nano</a>. Про&shy;сто&nbsp;4 GB уже как-то ма&shy;ло&shy;ва&shy;то, раз&shy;бол&shy;тал&shy;ся порт на&shy;уш&shy;ни&shy;ков, да и но&shy;вый ин&shy;тер&shy;фейс на&shy;мно&shy;го сим&shy;па&shy;тич&shy;нее. Вот прав&shy;да в сто&shy;ро&shy;ну <a href="http://www.apple.com/ipodtouch/">Touch</a>-ей я да&shy;же не смот&shy;рю, от&shy;сут&shy;ствия click-wheel, ко&shy;то&shy;рым в кар&shy;ма&shy;не мож&shy;но и гром&shy;кость по&shy;уба&shy;вить, и уны&shy;лый трек пе&shy;ре&shy;клю&shy;чить, и нуд&shy;ное ме&shy;сто в ауди&shy;окни&shy;ге пе&shy;ре&shy;мо&shy;тать, сво&shy;дит все пре&shy;иму&shy;ще&shy;ства пле&shy;е&shy;ра на нет, но это уже со&shy;всем дру&shy;гая ис&shy;то&shy;рия, о ко&shy;то&shy;рой, я, если об&shy;нов&shy;люсь, обя&shy;за&shy;тель&shy;но на&shy;пи&shy;шу. Та&shy;кие де&shy;ла.
		</div>

		<hr>
		
		<div class="content_footer hidden-print">
			<p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться радостью со своими воображаемыми друзьями в социальных сетях: <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A//www.mindcollapse.com/blog/152.html">фейсбук</a>, <a target="_blank" href="http://twitter.com/share?url=http%3A//www.mindcollapse.com/blog/152.html&amp;text=Darwin%20Video%20Streaming&amp;via=middlesizetit">твиттер</a>, <a target="_blank" href="http://vkontakte.ru/share.php?url=http%3A//www.mindcollapse.com/blog/152.html">вконтакте</a></span>.</p>
		</div>
	</div>

    </div>

    <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter22151810 = new Ya.Metrika({id:22151810, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/22151810" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->      
</body>

</html>