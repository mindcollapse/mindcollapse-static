<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>EWF - оживляем свой SSD в Windows</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="http://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="http://www.mindcollapse.com/blog/161.html">

        <link rel="up archives" href="http://www.mindcollapse.com/blog/archive/">

        
            <link rel="next" href="http://www.mindcollapse.com/blog/160.html">
        

        
            <link rel="prev" href="http://www.mindcollapse.com/blog/162.html">
        

        <meta property="og:title" content="EWF - оживляем свой SSD в Windows">
        <meta property="og:description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как обычно, с предыстории. Одна моя хорошая и невнимательная знакомая, прочитав у меня про все преимущества Acer Aspire One и ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="http://www.mindcollapse.com/blog/161.html">

        <meta name="description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как ...">

        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как обычно, с предыстории. Одна моя ...">
        <meta name="twitter:title" content="EWF - оживляем свой SSD в Windows">

        
            <meta name="twitter:card" content="summary">
        
    

    <link rel="author" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="http://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="http://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?efdf9ffc" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" src="/static/compiled/blog.js?4ecc0a3d"></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <div class="container">
        <div class="header navbar navbar-default hidden-print" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </div>

            <div class="collapse navbar-collapse blogmenu">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                    <li><a target="_blank" href="/moho/">Кино</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="http://www.twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="http://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </div>
        </div>

        
	<div class="article hentry" itemscope itemtype="http://schema.org/BlogPosting" role="main">
		<div class="content_header clearfix">
			<h1 itemprop="name" class="entry-title pull-left"><a itemprop="url" href="http://www.mindcollapse.com/blog/161.html">EWF - оживляем свой SSD в Windows</a></h1>
			<div class="published pull-right"><time itemprop="datePublished" datetime="2008-11-07T00:00:00Z" class="text-muted updated">7 ноября 2008 г.</time></div>
		</div>

		<hr class="first">

		<div itemprop="articleBody" class="entry-content content">
			Дан&shy;ная за&shy;пись яв&shy;ля&shy;ет&shy;ся ло&shy;ги&shy;че&shy;ским про&shy;дол&shy;же&shy;ни&shy;ем "<a href="/blog/159.html">Linux: оп&shy;ти&shy;ми&shy;зи&shy;ру&shy;ем SSD</a>", толь&shy;ко в этот раз опи&shy;сы&shy;ва&shy;ют&shy;ся тви&shy;ки для Windows. На&shy;чну, как обыч&shy;но, с пре&shy;ды&shy;сто&shy;рии. Од&shy;на моя хо&shy;ро&shy;шая и не&shy;вни&shy;ма&shy;тель&shy;ная зна&shy;ко&shy;мая, про&shy;чи&shy;тав у ме&shy;ня про все <a href="/blog/142.html">пре&shy;иму&shy;ще&shy;ства</a> Acer Aspire One и со&shy;всем за&shy;быв по&shy;смот&shy;реть на его <a href="/blog/149.html">не&shy;до&shy;стат&shy;ки</a>, взя&shy;ла се&shy;бе ана&shy;ло&shy;гич&shy;ную мо&shy;дель (а мо&shy;жет про&shy;сто за&shy;жа&shy;ла пе&shy;ре&shy;пла&shy;чи&shy;вать за 150-ю вер&shy;сию с HDD и WinXP). И все бы&shy;ло бы хо&shy;ро&shy;шо, но че&shy;рез па&shy;ру не&shy;дель мне на те&shy;ле&shy;фон по&shy;зво&shy;ни&shy;ли и с дро&shy;жью в го&shy;ло&shy;се со&shy;об&shy;щи&shy;ли, что пре&shy;ду&shy;ста&shy;нов&shy;лен&shy;но&shy;му <a href="http://www.linpus.com/">Linpus</a>-у на&shy;сту&shy;пил ло&shy;ги&shy;че&shy;ский пиз&shy;дец, а во&shy;об&shy;ще он был не&shy;кра&shy;си&shy;вый и те&shy;перь ба&shy;рыш&shy;ня Windows-а же&shy;ла&shy;ет. Все по&shy;пыт&shy;ки пе&shy;ре&shy;убе&shy;дить в поль&shy;зу Ubuntu и дру&shy;гих дис&shy;три&shy;бу&shy;ти&shy;вов встре&shy;ти&shy;лись во шты&shy;ки и по&shy;это&shy;му я, та&shy;кой до&shy;брый и от&shy;зыв&shy;чи&shy;вый иди&shy;от, взял се&shy;бе но&shy;ут&shy;бук с обе&shy;ща&shy;ни&shy;ем уста&shy;но&shy;вить на не&shy;го обыч&shy;ный Windows XP. Идея бы&shy;ла очень да&shy;же дрян&shy;ная, Microsoft <a href="http://news.ferra.ru/hard/2008/11/06/82745/">обе&shy;ща&shy;ли</a> ре&shy;а&shy;ли&shy;зо&shy;вать нор&shy;маль&shy;ную ра&shy;бо&shy;ту на твер&shy;до&shy;тель&shy;ных на&shy;ко&shy;пи&shy;те&shy;лях толь&shy;ко к седь&shy;мой вер&shy;сии сво&shy;е&shy;го де&shy;ти&shy;ща, а по&shy;ка все ра&shy;бо&shy;та&shy;ет из рук вон пло&shy;хо. "А вдруг про&shy;ка&shy;тит" - по ста&shy;рой при&shy;выч&shy;ке по&shy;ду&shy;мал я. Увы, не про&shy;ка&shy;ти&shy;ло, ста&shy;ви&shy;лось все ча&shy;са 4, за&shy;пус&shy;ка&shy;лось ми&shy;ну&shy;ты 4 и ра&shy;бо&shy;та&shy;ло как P486. Пер&shy;вой по&shy;пыт&shy;кой уско&shy;рить ра&shy;бо&shy;ту бы&shy;ла идея про&shy;ве&shy;сти ана&shy;ло&shy;гию с Linux, точ&shy;нее в tmpfs. В ок&shy;нах это на&shy;зы&shy;ва&shy;ет&shy;ся ramdisk и ре&shy;а&shy;ли&shy;зу&shy;ет&shy;ся с по&shy;мо&shy;щью ку&shy;чи про&shy;грамм&shy;но&shy;го обес&shy;пе&shy;че&shy;ния, сре&shy;ди ко&shy;то&shy;ро&shy;го мне при&shy;гля&shy;нул&shy;ся <a href="/media/etc/post161/ramdisk.zip">Gavotte Ramdisk</a> сво&shy;ей бес&shy;плат&shy;но&shy;стью и на&shy;ли&shy;чи&shy;ем GUI. К со&shy;жа&shy;ле&shy;нию, ни от&shy;клю&shy;че&shy;ние фай&shy;ла под&shy;кач&shy;ки и вос&shy;ста&shy;нов&shy;ле&shy;ния си&shy;сте&shy;мы, ни пе&shy;ре&shy;нос ди&shy;рек&shy;то&shy;рии TEMP на этот са&shy;мый ramdisk, ни ко&shy;пи&shy;ро&shy;ва&shy;ние ди&shy;рек&shy;то&shy;рии поль&shy;зо&shy;ва&shy;те&shy;ля на SDHC кар&shy;ту осо&shy;бо&shy;го ре&shy;зуль&shy;та&shy;та не при&shy;не&shy;сли - тор&shy;мо&shy;зи&shy;ло все ужас как без&shy;бож&shy;но. Windows каж&shy;дую ми&shy;ну&shy;ту умуд&shy;рял&shy;ся по&shy;пи&shy;сы&shy;вать вся&shy;кие глу&shy;по&shy;сти на жест&shy;кий диск, умень&shy;шая вре&shy;мя от&shy;кли&shy;ка и уве&shy;ли&shy;чи&shy;вая фи&shy;зи&shy;че&shy;ский из&shy;нос и без то&shy;го ка&shy;приз&shy;но&shy;го Solid State Drive.Не&shy;ожи&shy;дан&shy;но на по&shy;мощь при&shy;шла ути&shy;ли&shy;та от са&shy;мих мел&shy;ко&shy;мяг&shy;ких. На&shy;зы&shy;ва&shy;ет&shy;ся <a href="http://www.microsoft.com/windowsembedded/ru-ru/">Microsoft Windows XP Embedded</a> SP2 Feature Pack. За этим труд&shy;но&shy;про&shy;из&shy;но&shy;си&shy;мым на&shy;зва&shy;ни&shy;ем скры&shy;ва&shy;ет&shy;ся на&shy;бор ути&shy;лит для улуч&shy;ше&shy;ния ра&shy;бо&shy;ты ОС на встра&shy;и&shy;ва&shy;е&shy;мой тех&shy;ни&shy;ке, к при&shy;ме&shy;ру, вся&shy;кие там си&shy;сте&shy;мы "ум&shy;ный дом", бор&shy;то&shy;вые ком&shy;пью&shy;те&shy;ры ма&shy;шин, бан&shy;ко&shy;ма&shy;ты, тер&shy;ми&shy;на&shy;лы, где очень ча&shy;сто ис&shy;поль&shy;зу&shy;ет&shy;ся SSD па&shy;мять для умень&shy;ше&shy;ния энер&shy;го&shy;по&shy;треб&shy;ле&shy;ния, теп&shy;ло&shy;вы&shy;де&shy;ле&shy;ния и шум&shy;но&shy;сти ра&shy;бо&shy;ты. Из ку&shy;чи на&shy;бо&shy;ра ути&shy;лит нас ин&shy;те&shy;ре&shy;су&shy;ет толь&shy;ко <a href="http://msdn.microsoft.com/en-us/library/ms838511.aspx">EWF</a> (Enhanced Write Filter). Если в двух сло&shy;вах (по&shy;дроб&shy;нее на <a href="http://msdn.microsoft.com/en-us/library/ms912915.aspx">msdn</a> ли&shy;бо же в <a href="http://support.microsoft.com/kb/814257">support center</a>), то при ис&shy;поль&shy;зо&shy;ва&shy;нии дан&shy;но&shy;го си&shy;стем&shy;но&shy;го мо&shy;ду&shy;ля меж&shy;ду дис&shy;ком и про&shy;грам&shy;ма&shy;ми со&shy;зда&shy;ет&shy;ся не&shy;ко&shy;то&shy;ро&shy;го ро&shy;да бу&shy;фер&shy;ная зо&shy;на в RAM (на са&shy;мом де&shy;ле не толь&shy;ко в опе&shy;ра&shy;тив&shy;ной па&shy;мя&shy;ти, но нас ин&shy;те&shy;ре&shy;су&shy;ет имен&shy;но этот ва&shy;ри&shy;ант). ПО со&shy;вер&shy;ша&shy;ет всю свою стан&shy;дарт&shy;ную ру&shy;ти&shy;ну, не по&shy;до&shy;зре&shy;вая, что все фай&shy;ло&shy;вые опе&shy;ра&shy;ции за&shy;пи&shy;си про&shy;хо&shy;дят не на диск, а в бы&shy;струю энер&shy;го&shy;за&shy;ви&shy;си&shy;мую па&shy;мять. По&shy;сле за&shy;вер&shy;ше&shy;ния ра&shy;бо&shy;ты си&shy;сте&shy;мы все из&shy;ме&shy;не&shy;ния мо&shy;гут быть пе&shy;ре&shy;не&shy;се&shy;ны на диск, ну ли про&shy;сто ан&shy;ну&shy;ли&shy;ро&shy;ва&shy;ны. Это да&shy;ет нам не&shy;сколь&shy;ко пре&shy;иму&shy;ществ: во-пер&shy;вых си&shy;сте&shy;ма оста&shy;ет&shy;ся сте&shy;риль&shy;ной - уста&shy;но&shy;ви&shy;ли все ПО, за&shy;пу&shy;сти&shy;ли EWF, от&shy;клю&shy;чи&shy;ли commit из&shy;ме&shy;не&shy;ний и каж&shy;дый раз по&shy;сле пе&shy;ре&shy;за&shy;груз&shy;ки по&shy;лу&shy;ча&shy;е&shy;те чи&shy;стень&shy;кую ОС, во-вто&shy;рых вме&shy;сто за&shy;пи&shy;си на диск все пи&shy;шет&shy;ся в RAM, а это да&shy;ет ни&shy;хуй&shy;о&shy;вый при&shy;рост про&shy;из&shy;во&shy;ди&shy;тель&shy;но&shy;сти да&shy;же на обыч&shy;ных hd, не го&shy;во&shy;ря уже о SSD. Есть ра&shy;зу&shy;ме&shy;ет&shy;ся и ми&shy;ну&shy;сы: отъ&shy;еда&shy;ет&shy;ся опе&shy;ра&shy;тив&shy;ная па&shy;мять про&shy;пор&shy;ци&shy;о&shy;наль&shy;но ко&shy;ли&shy;че&shy;ству из&shy;ме&shy;не&shy;ний, ну и уве&shy;ли&shy;чи&shy;ва&shy;ет&shy;ся вре&shy;мя вы&shy;клю&shy;че&shy;ния до 3-5 ми&shy;нут при за&shy;пи&shy;си из&shy;ме&shy;не&shy;ний на диск из бу&shy;фер&shy;ной зо&shy;ны. Ну а те&shy;перь де&shy;таль&shy;ней о ре&shy;а&shy;ли&shy;за&shy;ции это&shy;го на ва&shy;шем ком&shy;пью&shy;те&shy;ре с Windows XP SP2, а луч&shy;ше SP3. Спер&shy;ва ка&shy;ча&shy;ем <a href="/media/etc/post161/ewftool.zip">EWF Tool</a>, ко&shy;то&shy;рая сде&shy;ла&shy;ет за вас всю ру&shy;ти&shy;ну, опи&shy;сан&shy;ную на сай&shy;те <a href="http://granturing.blogspot.com/">GranTuring</a>. Про&shy;сто на&shy;жи&shy;ма&shy;ем "Install EWF Support" и "Minimize Disk Writes", по&shy;сле это&shy;го скре&shy;щи&shy;ва&shy;ем паль&shy;цы и пе&shy;ре&shy;за&shy;гру&shy;жа&shy;ем&shy;ся. Если все прой&shy;дет нор&shy;маль&shy;но, то вы ни&shy;че&shy;го не за&shy;ме&shy;ти&shy;те да&shy;же, если нет - BSOD, а это зна&shy;чит, что вы хро&shy;ни&shy;че&shy;ский не&shy;удач&shy;ник и луч&shy;ше бы уме&shy;реть. Прав&shy;да и это не страш&shy;но, про&shy;сто вос&shy;ста&shy;нав&shy;ли&shy;ва&shy;ем ntldr в кор&shy;не дис&shy;ка C: из фай&shy;ла ntldr.bak. Вот и все, управ&shy;ле&shy;ние осу&shy;ще&shy;ствля&shy;ет&shy;ся с по&shy;мо&shy;щью кон&shy;соль&shy;но&shy;го при&shy;ло&shy;же&shy;ния ewfmgr (чи&shy;та&shy;ем /help), ли&shy;бо же из треи с по&shy;мо&shy;щью ути&shy;ли&shy;ты <a href="/media/etc/post161/jf_AutoHotkey.exe">jf_autohotkey</a>. По&shy;сле про&shy;из&shy;ве&shy;ден&shy;ных опе&shy;ра&shy;ций вы по&shy;лу&shy;чи&shy;те си&shy;сте&shy;му с ко&shy;то&shy;рой ком&shy;форт&shy;но ра&shy;бо&shy;тать, толь&shy;ко не за&shy;будь&shy;те вы&shy;не&shy;сти про&shy;филь поль&shy;зо&shy;ва&shy;те&shy;ля на кар&shy;ту па&shy;мя&shy;ти, ина&shy;че бу&shy;де&shy;те те&shy;рять все на&shy;строй&shy;ки по&shy;сле пе&shy;ре&shy;за&shy;груз&shy;ки ОС.
		</div>

		<hr>
		
		<div class="content_footer hidden-print">
			<p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться радостью со своими воображаемыми друзьями в социальных сетях: <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A//www.mindcollapse.com/blog/161.html">фейсбук</a>, <a target="_blank" href="http://twitter.com/share?url=http%3A//www.mindcollapse.com/blog/161.html&amp;text=EWF%20-%20%D0%BE%D0%B6%D0%B8%D0%B2%D0%BB%D1%8F%D0%B5%D0%BC%20%D1%81%D0%B2%D0%BE%D0%B9%20SSD%20%D0%B2%20Windows&amp;via=middlesizetit">твиттер</a>, <a target="_blank" href="http://vkontakte.ru/share.php?url=http%3A//www.mindcollapse.com/blog/161.html">вконтакте</a></span>.</p>
		</div>
	</div>

    </div>   
</body>

</html>