<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>EWF - оживляем свой SSD в Windows</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="https://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="https://www.mindcollapse.com/blog/161.html">

        
            <link rel="next" href="https://www.mindcollapse.com/blog/160.html">
        

        
            <link rel="prev" href="https://www.mindcollapse.com/blog/162.html">
        

        <meta property="og:title" content="EWF - оживляем свой SSD в Windows">
        <meta property="og:description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как обычно, с предыстории. Одна моя хорошая и невнимательная знакомая, прочитав у меня про все преимущества Acer Aspire One и ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="https://www.mindcollapse.com/blog/161.html">

        <meta name="description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как ...">

        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Данная запись является логическим продолжением &#34;Linux: оптимизируем SSD&#34;, только в этот раз описываются твики для Windows. Начну, как обычно, с предыстории. Одна моя ...">
        <meta name="twitter:title" content="EWF - оживляем свой SSD в Windows">

        
            <meta name="twitter:card" content="summary">
        
    

    <link rel="publisher" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="https://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="https://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?626b399d" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" async src="/static/compiled/blog.js?c6c1320e"></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <main class="container">
        <header class="header navbar navbar-default hidden-print">
            <nav class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </nav>

            <nav class="collapse navbar-collapse blogmenu" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="https://twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="https://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </nav>
        </header>

        
    <article class="article hentry" itemscope itemtype="http://schema.org/Article" role="main">
        <div class="content_header clearfix">
            <div itemprop="name" class="entry-title pull-left">
                <h1><a itemprop="url" href="https://www.mindcollapse.com/blog/161.html">EWF - оживляем свой SSD в Windows</a></h1>
            </div>

            <div class="published pull-right">
                <time itemprop="datePublished" datetime="2008-11-07T00:00:00Z" class="text-muted updated">11 November, 2008</time>
            </div>

            <div class="vcard author hidden">
                <a itemprop="author" class="url fn" href="http://www.mindcollapse.com/">Vladimir Smirnov</a>
            </div>
        </div>

        <hr class="first">

        <div itemprop="description" class="entry-content content">
            Дан­ная за­пись яв­ляет­ся ло­ги­че­ским про­дол­же­ни­ем "<a href="/blog/159.html">Linux: оп­ти­ми­зи­ру­ем SSD</a>", толь­ко в этот раз опи­сы­ва­ют­ся тви­ки для Windows. Начну, как обыч­но, с пре­ды­сто­рии. Од­на моя хо­ро­шая и не­вни­ма­тель­ная зна­ко­мая, про­чи­тав у ме­ня про все <a href="/blog/142.html">пре­иму­ще­ства</a> Acer Aspire One и со­всем за­быв по­смот­реть на его <a href="/blog/149.html">недо­стат­ки</a>, взя­ла се­бе ана­ло­гич­ную мо­дель (а мо­жет про­сто за­жа­ла пере­пла­чи­вать за 150-ю вер­сию с HDD и WinXP). И все бы­ло бы хо­ро­шо, но че­рез па­ру не­дель мне на теле­фон по­зво­ни­ли и с дро­жью в го­ло­се со­об­щи­ли, что преду­ста­нов­лен­но­му <a href="http://www.linpus.com/">Linpus</a>-у на­сту­пил ло­ги­че­ский пиз­дец, а во­об­ще он был не­кра­си­вый и те­перь ба­рыш­ня Windows-а же­ла­ет. Все по­пыт­ки пере­убе­дить в поль­зу Ubuntu и дру­гих дис­три­бу­ти­вов встре­ти­лись во шты­ки и поэто­му я, та­кой до­брый и от­зыв­чи­вый идиот, взял се­бе но­ут­бук с обе­ща­ни­ем уста­но­вить на не­го обыч­ный Windows XP. Идея бы­ла очень да­же дрян­ная, Microsoft <a href="http://news.ferra.ru/hard/2008/11/06/82745/">обе­ща­ли</a> ре­а­ли­зо­вать нор­маль­ную ра­бо­ту на твер­до­тель­ных на­ко­пи­те­лях толь­ко к седь­мой вер­сии сво­е­го де­ти­ща, а по­ка все ра­бо­та­ет из рук вон пло­хо. "А вдруг про­ка­тит" - по ста­рой при­выч­ке поду­мал я. Увы, не про­ка­ти­ло, ста­ви­лось все ча­са 4, запус­ка­лось ми­ну­ты 4 и ра­бо­та­ло как P486. Пер­вой по­пыт­кой уско­рить ра­бо­ту бы­ла идея про­ве­сти ана­ло­гию с Linux, точнее в tmpfs. В ок­нах это на­зы­ва­ет­ся ramdisk и ре­а­ли­зу­ет­ся с по­мо­щью ку­чи про­грамм­ного обес­пе­че­ния, сре­ди ко­то­ро­го мне при­гля­нул­ся <a href="/media/etc/post161/ramdisk.zip">Gavotte Ramdisk</a> сво­ей бес­плат­но­стью и на­личи­ем GUI. К со­жа­ле­нию, ни от­клю­че­ние файла под­кач­ки и восста­нов­ле­ния си­сте­мы, ни пере­нос ди­рек­то­рии TEMP на этот са­мый ramdisk, ни ко­пи­ро­ва­ние ди­рек­то­рии поль­зо­ва­те­ля на SDHC кар­ту осо­бо­го ре­зульта­та не при­не­сли - тор­мо­зи­ло все ужас как без­бож­но. Windows каж­дую ми­ну­ту умуд­рял­ся по­пи­сы­вать вся­кие глу­по­сти на жесткий диск, умень­шая вре­мя от­кли­ка и уве­ли­чи­вая фи­зи­че­ский из­нос и без то­го каприз­но­го Solid State Drive.Не­ожи­дан­но на по­мощь при­шла ути­ли­та от са­мих мел­ко­мяг­ких. На­зы­ва­ет­ся <a href="http://www.microsoft.com/windowsembedded/ru-ru/">Microsoft Windows XP Embedded</a> SP2 Feature Pack. За этим труд­но­произ­но­си­мым на­зва­ни­ем скры­ва­ет­ся на­бор ути­лит для улуч­ше­ния ра­бо­ты ОС на встра­и­ва­е­мой тех­ни­ке, к при­ме­ру, вся­кие там си­сте­мы "ум­ный дом", бор­то­вые компью­те­ры ма­шин, банко­ма­ты, тер­ми­на­лы, где очень ча­сто ис­поль­зу­ет­ся SSD па­мять для умень­ше­ния энер­го­по­треб­ле­ния, теп­ло­вы­де­ле­ния и шум­но­сти ра­бо­ты. Из ку­чи на­бо­ра ути­лит нас ин­тере­сует толь­ко <a href="http://msdn.microsoft.com/en-us/library/ms838511.aspx">EWF</a> (Enhanced Write Filter). Если в двух сло­вах (по­дроб­нее на <a href="http://msdn.microsoft.com/en-us/library/ms912915.aspx">msdn</a> ли­бо же в <a href="http://support.microsoft.com/kb/814257">support center</a>), то при ис­поль­зо­ва­нии дан­но­го си­стем­ного мо­ду­ля меж­ду дис­ком и про­грам­ма­ми со­зда­ет­ся не­ко­то­ро­го ро­да бу­фер­ная зо­на в RAM (на самом де­ле не толь­ко в опе­ра­тив­ной па­мя­ти, но нас ин­тере­сует имен­но этот ва­ри­ант). ПО со­вер­ша­ет всю свою стан­дарт­ную ру­ти­ну, не подо­зре­вая, что все файло­вые опе­ра­ции за­пи­си про­хо­дят не на диск, а в бы­струю энер­го­за­ви­си­мую па­мять. По­сле за­вер­ше­ния ра­бо­ты си­сте­мы все из­ме­не­ния мо­гут быть пере­не­се­ны на диск, ну ли про­сто ан­ну­ли­ро­ва­ны. Это да­ет нам несколь­ко пре­иму­ществ: во-пер­вых си­сте­ма оста­ет­ся сте­риль­ной - уста­но­ви­ли все ПО, запу­сти­ли EWF, от­клю­чи­ли commit из­ме­не­ний и каж­дый раз по­сле пе­реза­груз­ки по­лу­ча­е­те чи­стень­кую ОС, во-вто­рых вме­сто за­пи­си на диск все пи­шет­ся в RAM, а это да­ет ни­хуй­о­вый при­рост произ­во­ди­тель­но­сти да­же на обыч­ных hd, не го­во­ря уже о SSD. Есть ра­зу­ме­ет­ся и ми­ну­сы: отъ­еда­ет­ся опе­ра­тив­ная па­мять про­пор­ци­о­наль­но ко­ли­че­ству из­ме­не­ний, ну и уве­ли­чи­ва­ет­ся вре­мя вы­клю­че­ния до 3-5 ми­нут при за­пи­си из­ме­не­ний на диск из бу­фер­ной зо­ны. Ну а те­перь де­таль­ней о ре­а­ли­за­ции это­го на ва­шем компью­тере с Windows XP SP2, а луч­ше SP3. Спер­ва ка­ча­ем <a href="/media/etc/post161/ewftool.zip">EWF Tool</a>, ко­то­рая сде­ла­ет за вас всю ру­ти­ну, опи­сан­ную на сайте <a href="http://granturing.blogspot.com/">GranTuring</a>. Про­сто на­жи­ма­ем "Install EWF Support" и "Minimize Disk Writes", по­сле это­го скре­щи­ва­ем паль­цы и пе­реза­гру­жа­ем­ся. Если все прой­дет нор­маль­но, то вы ни­че­го не за­ме­ти­те да­же, если нет - BSOD, а это зна­чит, что вы хро­ни­че­ский неу­дач­ник и луч­ше бы уме­реть. Прав­да и это не страш­но, про­сто восста­нав­ли­ва­ем ntldr в кор­не дис­ка C: из файла ntldr.bak. Вот и все, управ­ле­ние осу­ще­ствляет­ся с по­мо­щью кон­соль­но­го при­ло­же­ния ewfmgr (чи­та­ем /help), ли­бо же из треи с по­мо­щью ути­ли­ты <a href="/media/etc/post161/jf_AutoHotkey.exe">jf_autohotkey</a>. По­сле произ­ве­ден­ных опе­ра­ций вы по­лу­чи­те си­сте­му с ко­то­рой ком­форт­но ра­бо­тать, толь­ко не за­будь­те вы­не­сти про­филь поль­зо­ва­те­ля на кар­ту па­мя­ти, ина­че бу­де­те те­рять все на­строй­ки по­сле пе­реза­груз­ки ОС.
        </div>
    </article>

    <hr>

    <footer class="footer hidden-print">
        <p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться ссылкой в <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=https%3A//www.mindcollapse.com/blog/161.html">фейсбуке</a>, <a target="_blank" href="http://twitter.com/share?url=https%3A//www.mindcollapse.com/blog/161.html&amp;text=EWF%20-%20%D0%BE%D0%B6%D0%B8%D0%B2%D0%BB%D1%8F%D0%B5%D0%BC%20%D1%81%D0%B2%D0%BE%D0%B9%20SSD%20%D0%B2%20Windows&amp;via=middlesizetit">твиттере</a> или <a target="_blank" href="http://vkontakte.ru/share.php?url=https%3A//www.mindcollapse.com/blog/161.html">в контакте</a></span>.</p>
    </footer>

    </main>
</body>

</html>