<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>Synchromium, Google Nigori и крик о помощи</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="http://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="http://www.mindcollapse.com/blog/277.html">

        <link rel="up archives" href="http://www.mindcollapse.com/blog/archive/">

        
            <link rel="next" href="http://www.mindcollapse.com/blog/275.html">
        

        
            <link rel="prev" href="http://www.mindcollapse.com/blog/apple-vs-google.html">
        

        <meta property="og:title" content="Synchromium, Google Nigori и крик о помощи">
        <meta property="og:description" content="Пришла в мою, затуманенную черепно-мозговыми травмами и алкогольно-наркотическими веществами, голову идея сделать софт для получения данных синхронизации браузера Google Chrome, которым пользуются большинство трезвомыслящих людей. Хронические ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="http://www.mindcollapse.com/blog/277.html">

        <meta name="description" content="Пришла в мою, затуманенную черепно-мозговыми травмами и алкогольно-наркотическими веществами, голову идея сделать софт для ...">

        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Пришла в мою, затуманенную черепно-мозговыми травмами и алкогольно-наркотическими веществами, голову идея сделать софт для получения данных синхронизации браузера ...">
        <meta name="twitter:title" content="Synchromium, Google Nigori и крик о помощи">

        
            <meta name="twitter:card" content="summary">
        
    

    <link rel="author" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="http://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="http://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?b2461273" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" src="/static/compiled/blog.js?6d647b68"></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <div class="container">
        <div class="header navbar navbar-default hidden-print" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </div>

            <div class="collapse navbar-collapse blogmenu">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                    <li><a target="_blank" href="/moho/">Кино</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="http://www.twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="http://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </div>
        </div>

        
	<div class="article hentry" id="post_" itemscope itemtype="http://schema.org/BlogPosting" role="main">
		<div class="content_header clearfix">
			<h1 itemprop="name" class="entry-title pull-left"><a itemprop="url" href="http://www.mindcollapse.com/blog/277.html">Synchromium, Google Nigori и крик о помощи</a></h1>
			<div class="published pull-right"><time itemprop="datePublished" datetime="2012-04-25T00:00:00Z" class="text-muted updated">25 апреля 2012 г.</time></div>
		</div>

		<hr class="first">

		<div itemprop="articleBody" class="entry-content content">
			<div style="font-weight: normal;">
	При&shy;шла в мою, за&shy;ту&shy;ма&shy;нен&shy;ную че&shy;реп&shy;но-моз&shy;го&shy;вы&shy;ми трав&shy;ма&shy;ми и ал&shy;ко&shy;голь&shy;но-нар&shy;ко&shy;ти&shy;че&shy;ски&shy;ми ве&shy;ще&shy;ства&shy;ми, го&shy;ло&shy;ву идея сде&shy;лать софт для по&shy;лу&shy;че&shy;ния дан&shy;ных син&shy;хро&shy;ни&shy;за&shy;ции бра&shy;у&shy;зе&shy;ра Google Chrome, ко&shy;то&shy;рым поль&shy;зу&shy;ют&shy;ся боль&shy;шин&shy;ство трез&shy;во&shy;мыс&shy;ля&shy;щих лю&shy;дей. Хро&shy;ни&shy;че&shy;ские дол&shy;бо&shy;е&shy;бы си&shy;дят в 21м ве&shy;ке на Opera, при&shy;ду&shy;мы&shy;вая не&shy;по&shy;нят&shy;ные ар&shy;гу&shy;мен&shy;ты вро&shy;де "она крас&shy;нень&shy;кая и с кра&shy;си&shy;вым стар&shy;то&shy;вым экра&shy;ном". IE - вы&shy;бор тех, ко&shy;му все рав&shy;но, к 10й вер&shy;сии в май&shy;кро&shy;соф&shy;те его от&shy;лич&shy;но при&shy;че&shy;са&shy;ли, но по&shy;про&shy;буй те&shy;перь пе&shy;ре&shy;бо&shy;ри этот сте&shy;рео&shy;тип ше&shy;стер&shy;ки. Firefox - для но&shy;сталь&shy;ги&shy;ру&shy;ю&shy;щих по сот&shy;ням ты&shy;сяч пла&shy;ги&shy;нов, для ани&shy;меш&shy;ни&shy;ков, не&shy;на&shy;ви&shy;дя&shy;щих им&shy;пе&shy;ри&shy;а&shy;лизм и дик&shy;та&shy;ту&shy;ру Google, или же стра&shy;да&shy;ю&shy;щих на&shy;вяз&shy;чи&shy;вой иде&shy;ей пре&shy;вра&shy;ще&shy;ния бра&shy;у&shy;зе&shy;ра в по&shy;что&shy;вый кли&shy;ент, чат, хле&shy;бо&shy;печ&shy;ку и циф&shy;ро&shy;вое вла&shy;га&shy;ли&shy;ще.</div><div style="font-weight: normal;"><br /></div><div style="font-weight: normal;"><b>UPD: </b>Synchromium те&shy;перь до&shy;сту&shy;пен для ва&shy;ших ай&shy;фон&shy;чи&shy;ков в <a href="http://itunes.apple.com/us/app/synchromium/id521738462?ls=1&amp;mt=8">iTunes</a>. Жал&shy;ко 99 цен&shy;тов? Пи&shy;ши мне - вы&shy;шлю про&shy;мо&shy;код.<br /><br /><b>UPD</b>: Не&shy;об&shy;хо&shy;ди&shy;мую сум&shy;му я за&shy;ра&shy;бо&shy;тал, син&shy;хро&shy;ми&shy;ум до&shy;сту&shy;пен for free для всех же&shy;ла&shy;ю&shy;щих. Тем бо&shy;лее, с вы&shy;хо&shy;дом Google Chrome на iOS ак&shy;ту&shy;аль&shy;ность про&shy;грам&shy;мы утра&shy;ти&shy;лась.<br /></div><div style="font-weight: normal;"><br /></div><div><b>UPD</b>: Synchromium на <a href="http://my-chrome.ru/2012/05/synchromium-sinxronizaciya-google-chrome-v-vashem-iphone/" style="font-weight: normal;">my-chome.ru</a>&nbsp;и в их же&nbsp;<a href="http://vk.com/wall-22746204_50683" style="font-weight: normal;">vk</a>.&nbsp;</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Про&shy;грам&shy;ма, ра&shy;зу&shy;ме&shy;ет&shy;ся, для те&shy;ле&shy;фо&shy;нов мар&shy;ки iPhone, ко&shy;то&shy;рые ис&shy;поль&shy;зу&shy;ют не толь&shy;ко трез&shy;во&shy;мыс&shy;ля&shy;щие и идей&shy;ные, но все ко&shy;му не лень, со&shy;зда&shy;вая огром&shy;ный по&shy;тре&shy;би&shy;тель&shy;ский ры&shy;нок, го&shy;то&shy;вый про&shy;гло&shy;тить лю&shy;бое при&shy;вле&shy;ка&shy;тель&shy;ное пред&shy;ло&shy;же&shy;ние. Я сей&shy;час про&nbsp;<a href="http://www.mindcollapse.com/blog/257.html">нор&shy;маль&shy;ные стра&shy;ны</a>, если что. Де&shy;лал я эту не&shy;боль&shy;шую ути&shy;ли&shy;ту под на&shy;зва&shy;ни&shy;ем&nbsp;<a href="https://github.com/mindcollapse/Synchromium-iPhone">Synchromium</a>&nbsp;(ну чот&shy;ко же, да? тут вам в на&shy;зва&shy;нии и син&shy;хро&shy;ни&shy;за&shy;ция, и хро&shy;ми&shy;ум) не столь&shy;ко для алч&shy;но&shy;го же&shy;ла&shy;ния на&shy;жи&shy;вы (по&shy;сле review обе&shy;зьян&shy;ка&shy;ми из эп&shy;п&shy;ла она по&shy;явит&shy;ся в AppStore по смеш&shy;ной це&shy;не в 99 цен&shy;тов, о чем я со&shy;об&shy;щу в&nbsp;<a href="https://twitter.com/middlesizetit">уют&shy;нень&shy;ком лас&shy;ко&shy;вом твит&shy;те&shy;ре</a>, там же бу&shy;дет про&shy;ве&shy;де&shy;на раз&shy;да&shy;ча 40 про&shy;мо&shy;ко&shy;дов для бес&shy;плат&shy;ной за&shy;груз&shy;ки), сколь&shy;ко для озна&shy;ком&shy;ле&shy;ния с со&shy;вре&shy;мен&shy;ным ин&shy;стру&shy;мен&shy;та&shy;ри&shy;ем раз&shy;ра&shy;бот&shy;ки под iOS. По&shy;след&shy;ний раз я за&shy;ни&shy;мал&shy;ся этим в те да&shy;ле&shy;кие вре&shy;ме&shy;на, ко&shy;гда XCode был еще в тре&shy;тьей вер&shy;сии, iOS на&shy;зы&shy;ва&shy;лась iPhoneOS, а тол&shy;пы ин&shy;ду&shy;со-ки&shy;тай&shy;цев еще не ку&shy;пи&shy;ли се&shy;бе БУш&shy;ный ма&shy;ки и не на&shy;ча&shy;ли дем&shy;пин&shy;го&shy;вать це&shy;ны сво&shy;им ущерб&shy;ным пред&shy;ло&shy;же&shy;ни&shy;ем.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Обыч&shy;но я раз&shy;би&shy;рал&shy;ся в спо&shy;со&shy;бе пе&shy;ре&shy;да&shy;чи дан&shy;ных сле&shy;ду&shy;ю&shy;щим об&shy;ра&shy;зом: за&shy;пус&shy;кал&nbsp;<a href="http://mitmproxy.org/">mitmproxy</a>&nbsp;(не&shy;за&shy;ме&shy;ни&shy;мая вещь, ко&shy;то&shy;рая по&shy;сле уста&shy;нов&shy;ки сво&shy;е&shy;го кор&shy;не&shy;во&shy;го сер&shy;ти&shy;фи&shy;ка&shy;та на це&shy;ле&shy;вую ма&shy;ши&shy;ну, ре&shy;а&shy;ли&shy;зу&shy;ет ssl interception&nbsp;<a href="http://mitmproxy.org/doc/ssl.html">ори&shy;ги&shy;наль&shy;ным об&shy;ра&shy;зом</a>&nbsp;- realtime ге&shy;не&shy;ра&shy;ци&shy;ей сво&shy;их са&shy;мо&shy;под&shy;пис&shy;ных, но ва&shy;лид&shy;ных сер&shy;ти&shy;фи&shy;ка&shy;тов для всех https за&shy;про&shy;сов), на&shy;стра&shy;и&shy;вал прок&shy;си сер&shy;вер в вир&shy;ту&shy;аль&shy;ной ма&shy;ши&shy;не с Windows, за&shy;пус&shy;кал ис&shy;пы&shy;ту&shy;е&shy;мую про&shy;грам&shy;му и на&shy;блю&shy;дал за ее по&shy;ве&shy;де&shy;ни&shy;ем. К сча&shy;стью, в со&shy;вре&shy;мен&shy;ном ми&shy;ре для боль&shy;шин&shy;ства сер&shy;ви&shy;сов REST API в со&shy;че&shy;та&shy;нии с JSON де-фа&shy;кто стал стан&shy;дар&shy;том об&shy;ме&shy;на ин&shy;фор&shy;ма&shy;ци&shy;ей меж&shy;ду кли&shy;ен&shy;том и сер&shy;ве&shy;ром. Но я за&shy;был, что это же Google, йоп&shy;та!&nbsp;<a href="http://www.youtube.com/watch?v=RnfXvPBV1dA">Paranoid Android</a>, как пе&shy;ли ра&shy;дио&shy;го&shy;ло&shy;вые. Слож&shy;но опи&shy;сать, на&shy;сколь&shy;ко силь&shy;ным бы&shy;ло мое разо&shy;ча&shy;ро&shy;ва&shy;ние, ко&shy;гда в при&shy;выч&shy;ном Answer body вме&shy;сто ожи&shy;да&shy;е&shy;мой ка&shy;ши из XML те&shy;гов или де&shy;сят&shy;ков ско&shy;бок JSON я уви&shy;дел би&shy;нар&shy;ный не&shy;рас&shy;пар&shy;си&shy;ва&shy;е&shy;мый яд с вкрап&shy;ле&shy;ни&shy;ем ку&shy;чи base64 encoded строк и unicode ме&shy;ша&shy;ни&shy;ны. Это так же обид&shy;но, как и вы&shy;играть в на&shy;ци&shy;о&shy;наль&shy;ной ло&shy;те&shy;рее по&shy;езд&shy;ку на 5 дней в Крым, в част&shy;ный сек&shy;тор, за 7 ки&shy;ло&shy;мет&shy;ров от мо&shy;ря.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	На этом мож&shy;но бы&shy;ло мах&shy;нуть на идею ру&shy;кой, взять би&shy;лет в Банг&shy;кок и пой&shy;ти в гоу-гоу бар смот&shy;реть на быв&shy;ше&shy;го му&shy;жи&shy;ка в ко&shy;ро&shy;тень&shy;кой юб&shy;ке и в то&shy;пи&shy;ке, как бы стран&shy;но это не зву&shy;ча&shy;ло. К сча&shy;стью, Google Chrome это Google Chromium на сте&shy;ро&shy;и&shy;дах, ко&shy;то&shy;рый как бы опен&shy;сор&shy;се со все&shy;ми вы&shy;те&shy;ка&shy;ю&shy;щи&shy;ми. Тут нуж&shy;но от&shy;ме&shy;тить ве&shy;ли&shy;ко&shy;леп&shy;ное ка&shy;че&shy;ство и ло&shy;ги&shy;ку ор&shy;га&shy;ни&shy;за&shy;ции ко&shy;да в&nbsp;<a href="http://src.chromium.org/viewvc/chrome/">ре&shy;по&shy;зи&shy;та&shy;рии</a>. Им за&shy;чи&shy;ты&shy;ва&shy;ешь&shy;ся как Ви&shy;ки&shy;пе&shy;ди&shy;ей: на&shy;чи&shy;на&shy;ешь изу&shy;чать код син&shy;хро&shy;ни&shy;за&shy;ции дан&shy;ных, а че&shy;рез ка&shy;кое-то вре&shy;мя уже смот&shy;ришь на их врап&shy;пер во&shy;круг OpenSSL или на уро&shy;вень аб&shy;страк&shy;ции NaCl. Но что-то я за&shy;пиз&shy;дел&shy;ся. Вкрат&shy;це, в Google изоб&shy;ре&shy;ли свой про&shy;то&shy;кол об&shy;ме&shy;на под на&shy;зва&shy;ни&shy;ем&nbsp;<a href="http://code.google.com/p/protobuf/">Protocol Buffers</a>. Тер&shy;мин "про&shy;то&shy;кол", прав&shy;да, тут не под&shy;хо&shy;дит, ско&shy;рее спо&shy;соб ин&shy;кап&shy;су&shy;ля&shy;ции дан&shy;ных, так как про&shy;то&shy;бу&shy;фер в на&shy;шем слу&shy;чае ра&shy;бо&shy;та&shy;ет по&shy;верх HTTP.&nbsp;</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Са&shy;ма ре&shy;а&shy;ли&shy;за&shy;ция на&shy;по&shy;мни&shy;ла мне та&shy;кой се&shy;бе ORM для API. В proto фай&shy;ле вы опи&shy;сы&shy;ва&shy;е&shy;те ин&shy;тер&shy;фейс бу&shy;ду&shy;ще&shy;го объ&shy;ек&shy;та, а по&shy;том спе&shy;ци&shy;аль&shy;ный транс&shy;ля&shy;тор-ком&shy;пи&shy;ля&shy;тор&nbsp;<a href="https://developers.google.com/protocol-buffers/docs/reference/python-generated">protoc</a>&nbsp;пе&shy;ре&shy;во&shy;дит эти фай&shy;лы из род&shy;но&shy;го фор&shy;ма&shy;та и син&shy;так&shy;си&shy;са в клас&shy;сы на C++, Python, Java пря&shy;мо "ис&shy;ка&shy;роп&shy;ки", ли&shy;бо в лю&shy;бой дру&shy;гой, под&shy;дер&shy;жи&shy;ва&shy;е&shy;мый&nbsp;<a href="http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns">нео&shy;фи&shy;ци&shy;аль&shy;но</a>. Про&shy;то&shy;син&shy;так&shy;сис до&shy;ста&shy;точ&shy;но бо&shy;гат, ре&shy;а&shy;ли&shy;зо&shy;ва&shy;но на&shy;сле&shy;до&shy;ва&shy;ние, ин&shy;кап&shy;су&shy;ля&shy;ция, по&shy;ли&shy;мор&shy;физм и про&shy;чие пре&shy;ле&shy;сти OOD. Идея не но&shy;ва (тот же&nbsp;<a href="http://thrift.apache.org/">Apache Thrift</a>), но оху&shy;ен&shy;на в сво&shy;ем удоб&shy;стве и про&shy;сто&shy;те. По су&shy;ти, опи&shy;сав весь про&shy;то&shy;кол вза&shy;и&shy;мо&shy;дей&shy;ствия один раз, вы по&shy;лу&shy;ча&shy;е&shy;те го&shy;то&shy;вый cross-language код ready for work. А еще этот спо&shy;соб при&shy;зван обез&shy;опа&shy;сить ва&shy;ше API от по&shy;сто&shy;рон&shy;них глаз и пытли&shy;вых умов, без proto фай&shy;ла прак&shy;ти&shy;че&shy;ски не&shy;ре&shy;аль&shy;но сфор&shy;ми&shy;ро&shy;вать из&shy;ме&shy;нен&shy;ный за&shy;прос или разо&shy;брать от&shy;вет во что-то чи&shy;та&shy;е&shy;мое. Имен&shy;но прак&shy;ти&shy;че&shy;ски, ведь на те&shy;о&shy;ре&shy;ти&shy;че&shy;ском уров&shy;не&nbsp;<a href="http://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BE%D1%80%D0%B5%D0%BC%D0%B0_%D0%BE_%D0%B1%D0%B5%D1%81%D0%BA%D0%BE%D0%BD%D0%B5%D1%87%D0%BD%D1%8B%D1%85_%D0%BE%D0%B1%D0%B5%D0%B7%D1%8C%D1%8F%D0%BD%D0%B0%D1%85">ги&shy;по&shy;те&shy;ти&shy;че&shy;ская обе&shy;зья&shy;на</a>, уда&shy;ряя паль&shy;ца&shy;ми по кла&shy;ви&shy;а&shy;ту&shy;ре пе&shy;чат&shy;ной ма&shy;шин&shy;ки слу&shy;чай&shy;ным об&shy;ра&shy;зом, ра&shy;но или позд&shy;но на&shy;пе&shy;ча&shy;та&shy;ет од&shy;ну из пьес Шекс&shy;пи&shy;ра. Но где вы ви&shy;де&shy;ли та&shy;ких обе&shy;зьян? Со&shy;вре&shy;мен&shy;ные пи&shy;са&shy;те&shy;ли из РФ и Укра&shy;и&shy;ны не в счет. Protocol Buffers - основ&shy;ная тех&shy;ни&shy;че&shy;ская при&shy;чи&shy;на, по&shy;че&shy;му Google+ все еще не име&shy;ет сто&shy;рон&shy;ней ре&shy;а&shy;ли&shy;за&shy;ции функ&shy;ции от&shy;прав&shy;ки со&shy;об&shy;ще&shy;ния. Мо&shy;биль&shy;ный кли&shy;ент для об&shy;ме&shy;на дан&shy;ны&shy;ми ис&shy;поль&shy;зу&shy;ет имен&shy;но его.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	К мо&shy;е&shy;му сча&shy;стью, для ObjectiveC су&shy;ще&shy;ство&shy;ва&shy;ла&nbsp;<a href="http://code.google.com/p/metasyntactic/wiki/ProtocolBuffers">unofficial ре&shy;а&shy;ли&shy;за&shy;ция</a>&nbsp;про&shy;то&shy;ко&shy;ла срав&shy;ни&shy;тель&shy;но до&shy;стой&shy;но&shy;го ка&shy;че&shy;ства. Все&nbsp;<a href="http://src.chromium.org/viewvc/chrome/trunk/src/sync/protocol/">де&shy;скрип&shy;то&shy;ры</a>&nbsp;бы&shy;ли взя&shy;ты из ис&shy;ход&shy;но&shy;го ко&shy;да Google Chromium и успеш&shy;но&nbsp;<a href="https://github.com/mindcollapse/Synchromium-iPhone/tree/master/ChromeSync/ProtocolClasses">со&shy;бра&shy;лись</a>&nbsp;в .m и .h non-ARC фай&shy;лы. Со&shy;бра&shy;лись, прав&shy;да, не без про&shy;блем, ре&shy;зуль&shy;тат при&shy;шлось не&shy;мно&shy;го ре&shy;дак&shy;ти&shy;ро&shy;вать вруч&shy;ную для устра&shy;не&shy;ния не&shy;ко&shy;то&shy;рых кри&shy;ти&shy;че&shy;ских оши&shy;бок, ко&shy;то&shy;рые сво&shy;ди&shy;лись, как пра&shy;ви&shy;ло, к не&shy;по&shy;нят&shy;но&shy;му пе&shy;ре&shy;на&shy;зна&shy;че&shy;нию пе&shy;ре&shy;мен&shy;ных и на&shy;сла&shy;и&shy;ва&shy;ю&shy;щим&shy;ся об&shy;ла&shy;стям ви&shy;ди&shy;мо&shy;сти. Ну а даль&shy;ше де&shy;ло тех&shy;ни&shy;ки. Во мно&shy;гом мне по&shy;мо&shy;гла вну&shy;трен&shy;няя стра&shy;ни&shy;ца Google Chrome до&shy;ступ&shy;ная по ад&shy;ре&shy;су&nbsp;<a href="chrome://sync/">chrome://sync</a>. Мно&shy;го пи&shy;сать о са&shy;мой ре&shy;а&shy;ли&shy;за&shy;ции я не бу&shy;ду, чуть ни&shy;же вас ждет це&shy;лый аб&shy;зац о мо&shy;их впе&shy;чат&shy;ле&shy;ни&shy;ях от XCode, iOS и еще один аб&shy;зац с опи&shy;са&shy;ни&shy;ем про&shy;бле&shy;мы, ко&shy;то&shy;рую я впер&shy;вые по&shy;про&shy;бую ре&shy;шить с по&shy;мо&shy;щью чи&shy;та&shy;те&shy;лей это&shy;го бло&shy;жи&shy;ка.&nbsp;</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	С са&shy;мо&shy;го на&shy;ча&shy;ла для хра&shy;не&shy;ния дан&shy;ных я ре&shy;шил по&shy;про&shy;бо&shy;вать мод&shy;ный&nbsp;<a href="http://en.wikipedia.org/wiki/Core_Data">CoreData</a>&nbsp;- уро&shy;вень аб&shy;страк&shy;ции от син&shy;так&shy;си&shy;са sqlite (не толь&shy;ко, но в боль&shy;шин&shy;стве сво&shy;ем). Ска&shy;жу сра&shy;зу, я ни ра&shy;зу не ObjectiveC про&shy;грам&shy;мист. Вы&shy;учить син&shy;так&shy;сис по&shy;сле всех тех язы&shy;ков, ко&shy;то&shy;рые я знаю, про&shy;бле&shy;мы не со&shy;ста&shy;ви&shy;ло, но я ни&shy;ко&shy;гда не смо&shy;гу по&shy;нять эту увле&shy;чен&shy;ность объ&shy;ек&shy;та&shy;ми и по&shy;ро&shy;жде&shy;ние не&shy;нуж&shy;ных сущ&shy;но&shy;стей. Язык раз&shy;ви&shy;ва&shy;ет&shy;ся, пы&shy;та&shy;ясь из&shy;ба&shy;вить&shy;ся от тя&shy;же&shy;ло&shy;го на&shy;сле&shy;дия си с по&shy;мо&shy;щью бло&shy;ков, но&shy;ти&shy;фи&shy;кей&shy;ш&shy;нов или но&shy;во&shy;го <a href="http://joris.kluivers.nl/blog/2012/03/13/new-objectivec-literal-syntax/">син&shy;так&shy;си&shy;са кон&shy;струк&shy;то&shy;ров</a> для основ&shy;ных ти&shy;пов, но все еще вы&shy;гля&shy;дит край&shy;не мон&shy;стру&shy;оз&shy;но с этой ка&shy;шей де&shy;ле&shy;га&shy;тов и обо&shy;ра&shy;чи&shy;ва&shy;ния в клас&shy;сы все&shy;го то&shy;го, что от&shy;лич&shy;но по&shy;ме&shy;ща&shy;лось и в при&shy;ми&shy;ти&shy;вы. Так вот по&shy;лу&shy;чи&shy;лось и с CoreData. За при&shy;зрач&shy;ным удоб&shy;ством раз&shy;мет&shy;ки схе&shy;мы ба&shy;зы дан&shy;ных скры&shy;ва&shy;ет&shy;ся ка&shy;ша из ко&shy;ор&shy;ди&shy;на&shy;то&shy;ров, кон&shy;тек&shy;стов, фет&shy;чед-ре&shy;кве&shy;стов и про&shy;чих из&shy;ли&shy;шеств. Да, при пра&shy;виль&shy;ном под&shy;хо&shy;де все это офи&shy;ген&shy;но ин&shy;те&shy;гри&shy;ру&shy;ет&shy;ся в ин&shy;фра&shy;струк&shy;ту&shy;ру то&shy;го же UITableView, но я, ви&shy;ди&shy;мо, про&shy;сто не до&shy;стиг дзе&shy;на. И имен&shy;но по&shy;это&shy;му ис&shy;поль&shy;зо&shy;вал&nbsp;<a href="https://github.com/ccgus/fmdb">FMDB</a>&nbsp;- оберт&shy;ку над сиш&shy;ной sqlite3 биб&shy;лио&shy;те&shy;кой с raw sql request syntax. Все очень про&shy;сто и со вку&shy;сом, а как лег&shy;ко ин&shy;те&shy;гри&shy;ро&shy;ва&shy;лось в тот же TableView? Ну про&shy;сто пес&shy;ня.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Сам XCode из&shy;ме&shy;нил&shy;ся. Я бы не ска&shy;зал, что в луч&shy;шую сто&shy;ро&shy;ну, раз&shy;ви&shy;тие дви&shy;жет&shy;ся в на&shy;прав&shy;ле&shy;нии, ко&shy;то&shy;рое нам пы&shy;та&shy;ют&shy;ся пре&shy;под&shy;не&shy;сти еди&shy;но&shy;вер&shy;ным. Без&shy;услов&shy;но, ARC по&shy;ра&shy;до&shy;вал про&shy;жжен&shy;ную release-ами и dealloc-ами ду&shy;шу ста&shy;ро&shy;го вол&shy;ка. Впро&shy;чем, воз&shy;ник&shy;ли опре&shy;де&shy;лен&shy;ные труд&shy;но&shy;сти в по&shy;ни&shy;ма&shy;нии прин&shy;ци&shy;пов его ра&shy;бо&shy;ты. У ме&shy;ня был UIViewController c всу&shy;ну&shy;тым в не&shy;го UIWebView, вся эта кра&shy;со&shy;та по&shy;ка&shy;зы&shy;ва&shy;лась поль&shy;зо&shy;ва&shy;те&shy;лю че&shy;рез pushViewController сиг&shy;нал UINavigationController-а. И вот, если вдруг поль&shy;зо&shy;ва&shy;тель от&shy;кры&shy;вал этот экран с ве&shy;бвью и за&shy;гру&shy;жал в ней ка&shy;кой-то ад&shy;рес, а по&shy;том, не до&shy;ждав&shy;шись окон&shy;ча&shy;ния за&shy;груз&shy;ки, на&shy;жи&shy;мал Back, то весь UIViewController де&shy;ал&shy;ло&shy;кал&shy;ся, но при этом, по окон&shy;ча&shy;нию за&shy;груз&shy;ки, ве&shy;бвью, ко&shy;то&shy;рый вро&shy;де как бы дол&shy;жен был уме&shy;реть вме&shy;сте с ро&shy;ди&shy;те&shy;лем, по&shy;сы&shy;лал уже мерт&shy;во&shy;му па&shy;па&shy;ше сиг&shy;нал "па&shy;цан&shy;трэ, празд&shy;ну&shy;ем, я за&shy;кон&shy;чил гру&shy;зить", что, есте&shy;ствен&shy;но, при&shy;во&shy;ди&shy;ло к па&shy;де&shy;нию все&shy;го в ERR_BAD_ACCESS. Это ре&shy;ши&shy;лось от&shy;сыл&shy;кой стоп-сиг&shy;на&shy;ла ве&shy;бвью из viewWillDisappear, но ка&shy;жет&shy;ся ка&shy;ким-то пе&shy;чаль&shy;ным не&shy;до&shy;ра&shy;зу&shy;ме&shy;ни&shy;ем. Ве&shy;ро&shy;ят&shy;ней все&shy;го, име&shy;ла ме&shy;сто моя ту&shy;пость, ко&shy;то&shy;рая поз&shy;во&shy;ли&shy;ла сде&shy;лать де&shy;ле&shy;га&shy;том UIWebView объ&shy;ект, ко&shy;то&shy;рый этот ве&shy;бвью и со&shy;здал, но тем не ме&shy;нее.&nbsp;</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Пол&shy;ным фа&shy;ка&shy;пом я счи&shy;таю ис&shy;то&shy;рию со Storyboard. За&shy;чем это бы&shy;ло сде&shy;ла&shy;но оста&shy;ет&shy;ся для ме&shy;ня за&shy;гад&shy;кой. Воз&shy;мож&shy;но, ре&shy;дак&shy;ти&shy;ро&shy;ва&shy;ние ин&shy;тер&shy;фей&shy;са в XIB не&shy;до&shy;ста&shy;точ&shy;но тор&shy;мо&shy;зи&shy;ло. С од&shy;ной сто&shy;ро&shy;ны все ста&shy;ло как-то удоб&shy;ней и ло&shy;гич&shy;ней (осо&shy;бен&shy;но в све&shy;те Static Cells, те же экра&shy;ны на&shy;стро&shy;ек или фор&shy;мы вхо&shy;да мож&shy;но те&shy;перь де&shy;лать не всле&shy;пую в ко&shy;де, а пря&shy;мо в UI ди&shy;зай&shy;не&shy;ре), но с дру&shy;гой сто&shy;ро&shy;ны я не ви&shy;жу смыс&shy;ла в отоб&shy;ра&shy;же&shy;нии всех экра&shy;нов при&shy;ло&shy;же&shy;ния, со&shy;еди&shy;нен&shy;ных segue стрел&shy;ка&shy;ми. Ну лад&shy;но, все это име&shy;ло бы пра&shy;во на жизнь, если бы не жут&shy;чай&shy;шие ла&shy;ги. По&shy;сле 20 раз&shy;ных кон&shy;трол&shy;ле&shy;ров в од&shy;ном Storyboard на&shy;чи&shy;на&shy;ет&shy;ся по&shy;кад&shy;ро&shy;вый цирк, а 8GB опе&shy;ра&shy;тив&shy;ной па&shy;мя&shy;ти ка&shy;те&shy;го&shy;ри&shy;че&shy;ски не хва&shy;та&shy;ет. И да, в 21 ве&shy;ке XCode все еще не мо&shy;жет из&shy;ба&shy;вить&shy;ся от дет&shy;ской бо&shy;лез&shy;ни не&shy;аде&shy;кват&shy;ной ор&shy;га&shy;ни&shy;за&shy;ции про&shy;ек&shy;та. Все про&shy;сто ва&shy;лит&shy;ся ско&shy;пом в од&shy;ну пап&shy;ку, ваш по&shy;кор&shy;ный слу&shy;га по&shy;тра&shy;тил це&shy;лый час, при&shy;во&shy;дя <a href="https://github.com/mindcollapse/Synchromium-iPhone">код</a> в нор&shy;маль&shy;ный чи&shy;та&shy;е&shy;мый вид не толь&shy;ко в IDE, но и в Finder-Explorer.&nbsp;</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Раз уж вы до&shy;чи&shy;та&shy;ли до са&shy;мо&shy;го кон&shy;ца, то са&shy;мое вре&shy;мя по&shy;го&shy;во&shy;рить о чем-то ин&shy;те&shy;рес&shy;ном. Преж&shy;де все&shy;го, форк&shy;нуть или ска&shy;чать код Synchromium&nbsp;<a href="https://github.com/mindcollapse/Synchromium-iPhone">вы мо&shy;же&shy;те на GitHub</a>. Я счи&shy;таю, что боль&shy;шин&shy;ство при&shy;ло&shy;же&shy;ний для iOS долж&shy;ны быть opensource. Это не ли&shy;ша&shy;ет раз&shy;ра&shy;бот&shy;чи&shy;ков ка&shy;ких-то ги&shy;пер&shy;при&shy;бы&shy;лей, ведь для ком&shy;пи&shy;ля&shy;ции ска&shy;чан&shy;ных ис&shy;ход&shy;ни&shy;ков не под iOS Simulator или хо&shy;тя бы уста&shy;нов&shy;ки на свой де&shy;вайс нуж&shy;но по&shy;ку&shy;пать Developer License за 99 аме&shy;ри&shy;кан&shy;ских ма&shy;рок. А на jailbreak-ну&shy;тый де&shy;вай&shy;сах ва&shy;ша про&shy;грам&shy;ма и так ра&shy;но или позд&shy;но по&shy;явит&shy;ся в&nbsp;<a href="http://hackulo.us/wiki/Installous">Installous</a>-e.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Впер&shy;вые за всю ис&shy;то&shy;рию су&shy;ще&shy;ство&shy;ва&shy;ния это&shy;го бло&shy;га, я про&shy;шу по&shy;мо&shy;щи и обе&shy;щаю за нее де&shy;неж&shy;ное воз&shy;на&shy;гра&shy;жде&shy;ние. Не&shy;боль&shy;шое, но вы бу&shy;де&shy;те гор&shy;ды со&shy;бой, про&shy;слав&shy;ле&shy;ны в этом бло&shy;жи&shy;ке и в са&shy;мой про&shy;грам&shy;ме. Че&shy;го уж там, я да&shy;же сде&shy;лаю та&shy;ту&shy;и&shy;ров&shy;ку с&nbsp;<a href="http://cool4u.ru/kartinki/1241-uzhasnye-tatuirovki-detey.html">ва&shy;шей фо&shy;то&shy;гра&shy;фи&shy;ей</a>. Про&shy;бле&shy;ма со&shy;сто&shy;ит в сле&shy;ду&shy;ю&shy;щем - в Google Chrome су&shy;ще&shy;ству&shy;ет воз&shy;мож&shy;ность cшиф&shy;ро&shy;вать свои дан&shy;ные син&shy;хро&shy;ни&shy;за&shy;ции. Со&shy;труд&shy;ни&shy;ка&shy;ми Google был раз&shy;ра&shy;бо&shy;тан соб&shy;ствен&shy;ной ал&shy;го&shy;ритм (вас это еще удив&shy;ля&shy;ет?) под ко&shy;до&shy;вым на&shy;зва&shy;ни&shy;ем Nigori. По су&shy;ти, это да&shy;же не ал&shy;го&shy;ритм шиф&shy;ро&shy;ва&shy;ния, а кон&shy;цеп&shy;ция об&shy;ме&shy;на дан&shy;ны&shy;ми меж&shy;ду об&shy;ла&shy;ком и устрой&shy;ством. По&shy;дроб&shy;нее о нем&nbsp;<a href="http://www.links.org/files/nigori-protocol.html">мож&shy;но про&shy;чи&shy;тать</a>. И вот пе&shy;ре&shy;до мной вста&shy;ла за&shy;да&shy;ча: как рас&shy;шиф&shy;ро&shy;вы&shy;вать за&shy;шиф&shy;ро&shy;ван&shy;ные дан&shy;ные. Что мо&shy;жет быть про&shy;ще, ко&shy;гда под ру&shy;кой есть от&shy;лич&shy;ные ис&shy;ход&shy;ни&shy;ки Хро&shy;ми&shy;у&shy;ма? Да, при&shy;знаю, я бес&shy;про&shy;буд&shy;но туп. Да&shy;же имея весь ма&shy;те&shy;ри&shy;ал на ру&shy;ках, я не мо&shy;гу пе&shy;ре&shy;не&shy;сти его на плат&shy;фор&shy;му iOS и CommonCrypto фрейм&shy;ворк. Чуть ни&shy;же сле&shy;ду&shy;ет мое ви&shy;де&shy;нье ал&shy;го&shy;рит&shy;ма с ссыл&shy;ка&shy;ми на ис&shy;ход&shy;ный код.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Нас ин&shy;те&shy;ре&shy;су&shy;ет файл&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;ct=rc&amp;cd=2&amp;sq=">nigori.cc</a>. Преж&shy;де все&shy;го, нуж&shy;но обра&shy;тить вни&shy;ма&shy;ние на&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=29">NigoriStream-класс</a>, ко&shy;то&shy;рый ре&shy;а&shy;ли&shy;зу&shy;ет свое&shy;об&shy;раз&shy;ный concat строк че&shy;рез &lt;&lt;. Но мы не в C++, да и мно&shy;же&shy;ствен&shy;ной за&shy;пи&shy;си в по&shy;ток нам не нуж&shy;но, до&shy;ста&shy;точ&shy;но про&shy;сто&nbsp;объ&shy;еди&shy;нить&nbsp;две стро&shy;ки вро&shy;де concatNigori:@"localhost" withString:@"dummy". Да&shy;лее пе&shy;ре&shy;хо&shy;дим к&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=68">фор&shy;ми&shy;ро&shy;ва&shy;нию клю&shy;чей</a>&nbsp;по&shy;мо&shy;щью ал&shy;го&shy;рит&shy;ма&nbsp;<a href="http://en.wikipedia.org/wiki/PBKDF2">PBKDF2</a>. Для на&shy;ча&shy;ла нам нуж&shy;но сфор&shy;ми&shy;ро&shy;вать&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=74">sUser</a>&nbsp;ключ. Он ге&shy;не&shy;ри&shy;ру&shy;ет&shy;ся с HMAC SHA1 хе&shy;ши&shy;ро&shy;ва&shy;ни&shy;ем на&shy;шей кон&shy;кат стро&shy;ки на ме&shy;сте псев&shy;до&shy;ран&shy;дом&shy;ной функ&shy;ции, па&shy;ро&shy;лем шиф&shy;ро&shy;ва&shy;ния, и дру&shy;ги&shy;ми па&shy;ра&shy;мет&shy;ра&shy;ми из&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.h&amp;exact_package=chromium&amp;q=nigori&amp;ct=rc&amp;cd=1&amp;sq=">nigori.h</a>&nbsp;(длин&shy;на клю&shy;ча 128 бит и ко&shy;ли&shy;че&shy;ство ите&shy;ра&shy;ций рав&shy;ное 1001). Тут воз&shy;ни&shy;ка&shy;ет пер&shy;вая слож&shy;ность, на&shy;ша кон&shy;кат стро&shy;ка со&shy;зда&shy;ет&shy;ся сле&shy;ду&shy;ю&shy;щим об&shy;ра&shy;зом: NigoriStream salt_password &lt;&lt; username &lt;&lt; hostname. А вот со зна&shy;че&shy;ни&shy;я&shy;ми пе&shy;ре&shy;мен&shy;ных username и hostname&nbsp;не&shy;боль&shy;шая&nbsp;про&shy;бле&shy;ма. На&shy;сколь&shy;ко я по&shy;нял, в Google ре&shy;ши&shy;ли сде&shy;лать их ста&shy;тич&shy;ны&shy;ми localhost и dummy, упо&shy;ми&shy;на&shy;ния об этом я на&shy;шел в ко&shy;де юнит&shy;те&shy;стов (что не по&shy;ка&shy;за&shy;тель&shy;но) и&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/internal_api/sync_manager.cc&amp;exact_package=chromium&amp;q=dummy%20sync&amp;l=1280">тут</a>. По&shy;лу&shy;чен&shy;ный salt (ко&shy;то&shy;рый мы пе&shy;ре&shy;во&shy;дим в стро&shy;ко&shy;вой фор&shy;мат с по&shy;мо&shy;щью&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/crypto/symmetric_key_nss.cc&amp;exact_package=chromium&amp;q=GetRawKey&amp;l=111">GetRawKey</a>&nbsp;ме&shy;то&shy;да) мы бу&shy;дем ис&shy;поль&shy;зо&shy;вать при ге&shy;не&shy;ра&shy;ции сле&shy;ду&shy;ю&shy;щих клю&shy;чей&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=87">kUser</a>&nbsp;(128 бит, 1002 цик&shy;ла ите&shy;ра&shy;ции),&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=91">kEnc</a>&nbsp;(128 бит, 1003 цик&shy;ла ите&shy;ра&shy;ции),&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=96">kMac</a>&nbsp;(128 бит, 1004 цик&shy;ла ите&shy;ра&shy;ции). В ка&shy;че&shy;стве псев&shy;до&shy;слу&shy;чай&shy;ной функ&shy;ции&nbsp;тут ис&shy;поль&shy;зу&shy;ет&shy;ся, на&shy;сколь&shy;ко я по&shy;нял, AES128. Те&shy;перь пе&shy;ре&shy;хо&shy;дим не&shy;по&shy;сред&shy;ствен&shy;но к на&shy;шей за&shy;шиф&shy;ро&shy;ван&shy;ной стро&shy;ке. Преж&shy;де все&shy;го, нам нуж&shy;но&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=202">де&shy;ко&shy;ди&shy;ро&shy;вать ее</a>&nbsp;из base64 в стро&shy;ку. Тут у ме&shy;ня воз&shy;ни&shy;ка&shy;ет про&shy;бле&shy;ма #2, мы не зна&shy;ем ко&shy;ди&shy;ров&shy;ки. По&shy;до&shy;зре&shy;ваю, что это ко&shy;неч&shy;но же не ASCII, ме&shy;то&shy;дом пе&shy;ре&shy;бо&shy;ра (StringUsingEncoding для NSData) по&shy;лу&shy;чи&shy;лось уста&shy;но&shy;вить, что стро&shy;ка де&shy;ко&shy;ди&shy;ру&shy;ет&shy;ся лишь в UTF16 (я без по&shy;ня&shy;тия, нуж&shy;но вы&shy;би&shy;рать big или little endian). Да&shy;лее&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=208">на&shy;ре&shy;за&shy;ем</a>&nbsp;по&shy;лу&shy;чен&shy;ную стро&shy;ку на кус&shy;ки. Пер&shy;вые 16 байт - IV, по&shy;след&shy;ние 32 бай&shy;та - hash, все, что меж&shy;ду ни&shy;ми - на&shy;ша за&shy;шиф&shy;ро&shy;ван&shy;ная стро&shy;ка. До рас&shy;шиф&shy;ров&shy;ки нам еще да&shy;ле&shy;ко, сна&shy;ча&shy;ла нуж&shy;но убе&shy;дить&shy;ся в том, что стро&shy;ка бы&shy;ла за&shy;шиф&shy;ро&shy;ва&shy;на имен&shy;но на&shy;шим па&shy;ро&shy;лем. Срав&shy;ни&shy;ва&shy;ем на&shy;ши по&shy;след&shy;ние 32 бай&shy;та в ви&shy;де hash стро&shy;ки с&nbsp;HMAC SHA256 хеш&shy;су&shy;мой на&shy;ше&shy;го kMac. В слу&shy;чае сов&shy;па&shy;де&shy;ния&nbsp;<a href="http://code.google.com/searchframe#OAMlx_jo-ck/src/sync/util/nigori.cc&amp;exact_package=chromium&amp;q=nigori&amp;l=235">ини&shy;ци&shy;а&shy;ли&shy;зи&shy;ру&shy;ем</a>&nbsp;AES CBC де&shy;крип&shy;тор клю&shy;чем kEnc и те&shy;ми пер&shy;вы&shy;ми 16 бай&shy;та&shy;ми IV. Этим де&shy;крип&shy;то&shy;ром рас&shy;шиф&shy;ро&shy;вы&shy;ва&shy;ем стро&shy;ку и все.</div>
<div style="font-weight: normal;">
	&nbsp;</div>
<div style="font-weight: normal;">
	Пиз&shy;дец, да. Не&shy;по&shy;нят&shy;но, за&shy;чем та&shy;кая па&shy;ра&shy;нойя, ко&shy;гда на ко&shy;неч&shy;ной ма&shy;ши&shy;не все па&shy;ро&shy;ли хра&shy;нят&shy;ся в sqlite ба&shy;зе дан&shy;ных без шиф&shy;ро&shy;ва&shy;ния во&shy;об&shy;ще. Я пы&shy;тал&shy;ся со&shy;брать nigori.cc в static lib, но по&shy;тер&shy;пел не&shy;уда&shy;чу - не&shy;об&shy;хо&shy;ди&shy;мые за&shy;ви&shy;си&shy;мо&shy;сти про&shy;сто от&shy;сут&shy;ство&shy;ва&shy;ли. Воз&shy;мож&shy;но, есть ве&shy;ро&shy;ят&shy;ность со&shy;брать OpenSSL, а не NSS вер&shy;сию, под iOS это долж&shy;но ра&shy;бо&shy;тать, но у ме&shy;ня про&shy;сто не хва&shy;та&shy;ет ума. Же&shy;ла&shy;ю&shy;щие по&shy;мочь при&shy;гла&shy;ша&shy;ют&shy;ся в скайп <a href="skype:orl-light?chat">orl-light</a> или в по&shy;чту <a href="mailto:vladimir@smirnov.im">vladimir@smirnov.im</a>, где я с удо&shy;воль&shy;стви&shy;ем рас&shy;ска&shy;жу вам все де&shy;та&shy;ли. Та&shy;кой день.</div>

		</div>

		<hr>
		
		<div class="content_footer hidden-print">
			<p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться радостью со своими воображаемыми друзьями в социальных сетях: <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A//www.mindcollapse.com/blog/277.html">фейсбук</a>, <a target="_blank" href="http://twitter.com/share?url=http%3A//www.mindcollapse.com/blog/277.html&amp;text=Synchromium%2C%20Google%20Nigori%20%D0%B8%20%D0%BA%D1%80%D0%B8%D0%BA%20%D0%BE%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D0%B8&amp;via=middlesizetit">твиттер</a>, <a target="_blank" href="http://vkontakte.ru/share.php?url=http%3A//www.mindcollapse.com/blog/277.html">вконтакте</a></span>.</p>
		</div>
	</div>

    </div>   
</body>

</html>