<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>Работаем с stream.twitter.com</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="http://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="http://www.mindcollapse.com/blog/212.html">

        <link rel="up archives" href="http://www.mindcollapse.com/blog/archive/">

        
            <link rel="next" href="http://www.mindcollapse.com/blog/211.html">
        

        
            <link rel="prev" href="http://www.mindcollapse.com/blog/213.html">
        

        <meta property="og:title" content="Работаем с stream.twitter.com">
        <meta property="og:description" content="Многим известно, что твиттер стал знаменитым не только по причине своей простоты и какой-то супер идеи, но и благодаря уникальному, интуитивно понятному для разработчика с IQ выше шимпанзе-олигофрена, но в то же время мощному API на котором появилось уже ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="http://www.mindcollapse.com/blog/212.html">

        <meta name="description" content="Многим известно, что твиттер стал знаменитым не только по причине своей простоты и какой-то супер идеи, но и благодаря уникальному, ...">

        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Многим известно, что твиттер стал знаменитым не только по причине своей простоты и какой-то супер идеи, но и благодаря уникальному, интуитивно понятному для ...">
        <meta name="twitter:title" content="Работаем с stream.twitter.com">

        
            <meta name="twitter:card" content="summary">
        
    

    <link rel="author" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="http://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="http://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?b2461273" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" src="/static/compiled/blog.js?f53be5a1"></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <div class="container">
        <div class="header navbar navbar-default hidden-print" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </div>

            <div class="collapse navbar-collapse blogmenu">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                    <li><a target="_blank" href="/moho/">Кино</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="http://www.twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="http://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </div>
        </div>

        
	<div class="article hentry" id="post_" itemscope itemtype="http://schema.org/BlogPosting" role="main">
		<div class="content_header clearfix">
			<h1 itemprop="name" class="entry-title pull-left"><a itemprop="url" href="http://www.mindcollapse.com/blog/212.html">Работаем с stream.twitter.com</a></h1>
			<div class="published pull-right"><time itemprop="datePublished" datetime="2010-01-07T00:00:00Z" class="text-muted updated">7 января 2010 г.</time></div>
		</div>

		<hr class="first">

		<div itemprop="articleBody" class="entry-content content">
			Мно&shy;гим из&shy;вест&shy;но, что <a href="http://twitter.com/middlesizetit">твит&shy;тер</a> стал зна&shy;ме&shy;ни&shy;тым не толь&shy;ко по при&shy;чи&shy;не сво&shy;ей про&shy;сто&shy;ты и ка&shy;кой-то су&shy;пер идеи, но и бла&shy;го&shy;да&shy;ря уни&shy;каль&shy;но&shy;му, ин&shy;ту&shy;и&shy;тив&shy;но по&shy;нят&shy;но&shy;му для раз&shy;ра&shy;бот&shy;чи&shy;ка с IQ вы&shy;ше шим&shy;пан&shy;зе-оли&shy;го&shy;фре&shy;на, но в то же вре&shy;мя мощ&shy;но&shy;му <a href="http://apiwiki.twitter.com/Twitter-API-Documentation">API</a> на ко&shy;то&shy;ром по&shy;яви&shy;лось уже OVER 9000 раз&shy;ных кли&shy;ен&shy;тов, сер&shy;ви&shy;сов, сай&shy;тов, ко&shy;то&shy;рые соб&shy;ствен&shy;но этот API и ис&shy;поль&shy;зу&shy;ют. Так вот, мне ста&shy;ло ин&shy;те&shy;рес&shy;но по&shy;лу&shy;чать ста&shy;ти&shy;сти&shy;ку этих са&shy;мых кли&shy;ен&shy;тов: кто кру&shy;че и на греб&shy;не вол&shy;ны, дру&shy;ги&shy;ми сло&shy;ва&shy;ми. Дан&shy;ные <a href="http://apiwiki.twitter.com/Twitter-REST-API-Method:-statuses-public_timeline">мож&shy;но бы&shy;ло</a> во&shy;ро&shy;вать ва&shy;го&shy;нет&shy;ка&shy;ми без ка&shy;кой-ли&shy;бо ав&shy;то&shy;ри&shy;за&shy;ции в xml, json, rss или atom обыч&shy;ным GET за&shy;про&shy;сом. За 10 ми&shy;нут на ле&shy;вой ко&shy;лен&shy;ке был со&shy;бран ма&shy;лень&shy;кий пер&shy;ло&shy;вый де&shy;мон с ку&shy;чей не&shy;нуж&shy;но&shy;го му&shy;со&shy;ра и кри&shy;вой ло&shy;ги&shy;кой (<a href="/media/copypaste/stream_twitterv1.perl">ис&shy;ход&shy;ный код</a>), ко&shy;то&shy;рый рас&shy;пар&shy;си&shy;вал xml, до&shy;ста&shy;вал ссыл&shy;ку кли&shy;ен&shy;та, его на&shy;зва&shy;ние и всо&shy;вы&shy;вал все это в БД. Един&shy;ствен&shy;ной про&shy;бле&shy;мой ока&shy;за&shy;лось то, что дан&shy;ные это&shy;го за&shy;про&shy;са твит&shy;те&shy;ром ке&shy;ши&shy;ру&shy;ют&shy;ся на 1 ми&shy;ну&shy;ту - ста&shy;ти&shy;сти&shy;ка со&shy;би&shy;ра&shy;лась очень мед&shy;лен&shy;но и ран&shy;дом&shy;но, и я уже по&shy;чти по&shy;ло&shy;жил пе&shy;нис, как уви&shy;дел вни&shy;зу до&shy;ков линк на <a href="http://apiwiki.twitter.com/Streaming-API-Documentation">Streaming API</a>. Как ока&shy;за&shy;лось, су&shy;ще&shy;ству&shy;ет не&shy;кая аль&shy;фа-вер&shy;сия ин&shy;тер&shy;фей&shy;са, поз&shy;во&shy;ля&shy;ю&shy;щая со&shy;би&shy;рать дан&shy;ные http-по&shy;то&shy;ком с до&shy;воль&shy;но жир&shy;ным рей&shy;том. На на&shy;пи&shy;са&shy;ния сле&shy;ду&shy;ю&shy;ще&shy;го ро&shy;га&shy;то&shy;го с ви&shy;ла&shy;ми де&shy;мо&shy;на ушло еще мень&shy;ше вре&shy;ме&shy;ни, за&shy;то эта вер&shy;сия во&shy;об&shy;ще бы&shy;ла ли&shy;ше&shy;на не&shy;нуж&shy;ной хуй&shy;ни и кон&shy;фе&shy;ти (<a href="/media/copypaste/stream_twitter.perl">ис&shy;ход&shy;ный код</a>). While (1) в прин&shy;ци&shy;пе и не ну&shy;жен, LWP и так за&shy;цик&shy;ли&shy;ва&shy;ет&shy;ся, ка&shy;чая дан&shy;ные из по&shy;то&shy;ка, но я за&shy;ме&shy;тил, что стрим&shy;мер твит&shy;те&shy;ра ино&shy;гда об&shy;ры&shy;ва&shy;ет со&shy;еди&shy;не&shy;ние 2-3 ра&shy;за в сут&shy;ки, так что ме&shy;ра предо&shy;сто&shy;рож&shy;но&shy;сти не по&shy;ме&shy;ща&shy;ет.<p></p><p>За па&shy;ру-трой&shy;ку ча&shy;сов на&shy;ва&shy;ял и ху&shy;до&shy;соч&shy;ный фронт&shy;энд с не&shy;кра&shy;си&shy;вым ми&shy;ни&shy;ма&shy;лист&shy;ским ди&shy;зай&shy;ном. Про&shy;жи&shy;ва&shy;ет он по ад&shy;ре&shy;су <a href="/twitterapp/">/twitterapp</a>, об&shy;нов&shy;ля&shy;ет&shy;ся в ри&shy;ал&shy;тай&shy;ме (за сут&shy;ки со&shy;жрал мил&shy;ли&shy;он твит&shy;тов и не по&shy;да&shy;вил&shy;ся), го&shy;во&shy;рит по ан&shy;глий&shy;ски. Бы&shy;ло на&shy;столь&shy;ко лень что-то услож&shy;нять, что для ге&shy;не&shy;ра&shy;ции гра&shy;фи&shy;ка ис&shy;поль&shy;зу&shy;ет&shy;ся <a href="http://code.google.com/apis/chart/">Google Charts API</a>, ко&shy;то&shy;рый ока&shy;зал&shy;ся очень да&shy;же ок для та&shy;ких мел&shy;ких дел. Если ну&shy;жен код php-фронт&shy;эн&shy;да - сту&shy;чи&shy;те, но там все стан&shy;дарт&shy;но и ни&shy;че&shy;го ин&shy;те&shy;рес&shy;но&shy;го. Сер&shy;вис про&shy;сто just for fun, но за&shy;то узнал па&shy;роч&shy;ку ин&shy;те&shy;рес&shy;ных при&shy;ло&shy;же&shy;ний из то&shy;па. И да, мой лю&shy;би&shy;мый <a href="http://www.atebits.com/">Twettie</a> по&shy;пал фде&shy;сят&shy;ку, это при&shy;ят&shy;но.</p>
		</div>

		<hr>
		
		<div class="content_footer hidden-print">
			<p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться радостью со своими воображаемыми друзьями в социальных сетях: <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A//www.mindcollapse.com/blog/212.html">фейсбук</a>, <a target="_blank" href="http://twitter.com/share?url=http%3A//www.mindcollapse.com/blog/212.html&amp;text=%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D0%BC%20%D1%81%20stream.twitter.com&amp;via=middlesizetit">твиттер</a>, <a target="_blank" href="http://vkontakte.ru/share.php?url=http%3A//www.mindcollapse.com/blog/212.html">вконтакте</a></span>.</p>
		</div>
	</div>

    </div>   
</body>

</html>