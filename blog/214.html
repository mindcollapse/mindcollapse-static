<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>Yandex Maps для iPhone (YaMap Web)</title> 

    <base href="http://www.mindcollapse.com/">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="http://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="http://www.mindcollapse.com/blog/214.html">

        <link rel="up archives" href="http://www.mindcollapse.com/blog/archive/">

        
            <link rel="next" href="http://www.mindcollapse.com/blog/213.html">
        

        
            <link rel="prev" href="http://www.mindcollapse.com/blog/215.html">
        

        <meta property="og:title" content="Yandex Maps для iPhone (YaMap Web)">
        <meta property="og:description" content="Мне очень нра­вит­ся бра­у­зер в iPhone. По су­ти, он дал на­ча­ло но­вой эры мо­биль­но­го ин­тер­не­та, по­ста­вив на свое ме­сто раз­но­об­раз­ные огрыз­ки для урод­ли­вых сим­би­а­нов ти­па Опе­ры Ми­ни и иже с ним. По­стро­ен он (как и бра­у­зер Android, Palm Pre и про­чих со­вре­мен­ных ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="http://www.mindcollapse.com/blog/214.html">

        <meta name="description" content="Мне очень нра­вит­ся бра­у­зер в iPhone. По су­ти, он дал на­ча­ло но­вой эры мо­биль­но­го ин­тер­не­та, по­ста­вив на свое ме­сто раз­но­об­раз­ные огрыз­ки ...">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Мне очень нра­вит­ся бра­у­зер в iPhone. По су­ти, он дал на­ча­ло но­вой эры мо­биль­но­го ин­тер­не­та, по­ста­вив на свое ме­сто раз­но­об­раз­ные огрыз­ки для урод­ли­вых сим­би­а­нов ти­па ...">
        <meta name="twitter:title" content="Yandex Maps для iPhone (YaMap Web)">
    

    <link rel="author" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="http://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="http://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?f55bb245" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" src="/static/compiled/blog.js?f97a9d7b" defer></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <div class="container">

        <div class="header navbar navbar-default hidden-print" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </div>

            <div class="collapse navbar-collapse blogmenu">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                    <li><a target="_blank" href="/moho/">Кино</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="http://www.twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="http://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </div>
        </div>

        
	<div class="article hentry" id="post_" itemscope itemtype="http://schema.org/BlogPosting" role="main">
		<div class="content_header clearfix">
			<h1 itemprop="name" class="entry-title pull-left"><a itemprop="url" href="http://www.mindcollapse.com/blog/214.html">Yandex Maps для iPhone (YaMap Web)</a></h1>
			<div class="published pull-right"><time itemprop="datePublished" datetime="2010-01-13T00:00:00Z" class="text-muted">13 января 2010 г.</time></div>
		</div>

		<hr class="first">

		<div itemprop="articleBody" class="entry-content content">
			Мне очень нра&shy;вит&shy;ся бра&shy;у&shy;зер в iPhone. По су&shy;ти, он дал на&shy;ча&shy;ло но&shy;вой эры мо&shy;биль&shy;но&shy;го ин&shy;тер&shy;не&shy;та, по&shy;ста&shy;вив на свое ме&shy;сто раз&shy;но&shy;об&shy;раз&shy;ные огрыз&shy;ки для урод&shy;ли&shy;вых сим&shy;би&shy;а&shy;нов ти&shy;па Опе&shy;ры Ми&shy;ни и иже с ним. По&shy;стро&shy;ен он (как и бра&shy;у&shy;зер Android, Palm Pre и про&shy;чих со&shy;вре&shy;мен&shy;ных мо&shy;биль&shy;ных ОС) на осно&shy;ве <a href="http://webkit.org/">webkit</a>, что да&shy;ет воз&shy;мож&shy;ность рен&shy;де&shy;рить стра&shy;ни&shy;цы имен&shy;но та&shy;ки&shy;ми, ка&shy;кие они есть, а не так, как это вла&shy;зит на экран&shy;чик фин&shy;ско&shy;го смарт&shy;фо&shy;на (да, я знаю о су&shy;ще&shy;ство&shy;ва&shy;нии веб&shy;ки&shy;та для S60, но вы его ви&shy;де&shy;ли?). Это та&shy;кая пре&shy;лю&shy;дия, даль&shy;ше, как обыч&shy;но, пре&shy;ды&shy;сто&shy;рия =)<p></p><p>Од&shy;на&shy;жды по&shy;че&shy;му-то мне за&shy;хо&shy;те&shy;лось по&shy;иметь <a href="http://maps.yandex.ru/">Ян&shy;декс.Кар&shy;ты</a> на сво&shy;ем устрой&shy;стве. В апп&shy;сто&shy;ре бы&shy;ли толь&shy;ко <a href="http://nano.yandex.ru/project/yandex-traffic/">Ян&shy;декс.Проб&shy;ки</a>, ко&shy;то&shy;рый хоть вро&shy;де как бы и кар&shy;ты од&shy;но&shy;вре&shy;мен&shy;но с по&shy;ис&shy;ком и ЖПС, но до стан&shy;дарт&shy;но&shy;го при&shy;ло&shy;же&shy;ния гугло&shy;мепс да&shy;же и на цы&shy;поч&shy;ках с пал&shy;кой в ру&shy;ке не до&shy;тя&shy;ги&shy;ва&shy;ют. По&shy;это&shy;му я, как по&shy;ла&shy;га&shy;ет&shy;ся, по&shy;че&shy;сал ре&shy;пу и при&shy;сту&shy;пил к на&shy;пи&shy;са&shy;нию сво&shy;их карт с блек&shy;дже&shy;ком, на&shy;ви&shy;га&shy;ци&shy;ей, из&shy;бран&shy;ны&shy;ми мет&shy;ка&shy;ми и шлю&shy;ха&shy;ми. </p><p></p><p><strong>Опи&shy;са&shy;ние при&shy;ло&shy;же&shy;ния</strong>: да&shy;вай&shy;те спер&shy;ва не&shy;по&shy;сред&shy;ствен&shy;но про про&shy;грамм&shy;ку. Лич&shy;но я счи&shy;таю, что по&shy;лу&shy;чи&shy;лось впол&shy;не очень да&shy;же. Для уста&shy;нов&shy;ки вам нуж&shy;но все&shy;го лишь от&shy;крыть ссыл&shy;ку <a href="/media/ymapw/">/media/ymapw/</a> в Safari на сво&shy;ем ябло&shy;фо&shy;не и сле&shy;до&shy;вать ин&shy;струк&shy;ци&shy;ям. По&shy;сле это&shy;го на ва&shy;шем home screen долж&shy;на по&shy;явить&shy;ся икон&shy;ка YaMap Web, ее и за&shy;пус&shy;ка&shy;ем. <a href="http://twitpic.com/xtoev">Ин&shy;тер&shy;фейс карт</a> и все дей&shy;ствия ана&shy;ло&shy;гич&shy;ны ори&shy;ги&shy;наль&shy;ным гугло&shy;кар&shy;там. Ще&shy;пок для уве&shy;ли&shy;че&shy;ния\умень&shy;ше&shy;ния (по&shy;ка это де&shy;ла&shy;ет&shy;ся очень не&shy;спеш&shy;но, я в по&shy;ис&shy;ках ре&shy;ше&shy;ния), двой&shy;ной tap для при&shy;бли&shy;же&shy;ния к опре&shy;де&shy;лен&shy;ной точ&shy;ке. Име&shy;ет&shy;ся по&shy;иск, вы&shy;бор ти&shy;па кар&shy;ты, бы&shy;строе пе&shy;ре&shy;ме&shy;ще&shy;ние к сво&shy;е&shy;му ме&shy;сто&shy;по&shy;ло&shy;же&shy;нию по gps и отоб&shy;ра&shy;же&shy;ние этих ко&shy;ор&shy;ди&shy;нат на кар&shy;те флаж&shy;ком. Един&shy;ствен&shy;ное что - вы мо&shy;же&shy;те од&shy;но&shy;вре&shy;мен&shy;но тэп&shy;нуть 2мя паль&shy;ца&shy;ми по экра&shy;ну для скры&shy;тия\отоб&shy;ра&shy;же&shy;ния ме&shy;ню. Очень удоб&shy;но, если нуж&shy;но рас&shy;смот&shy;реть что-то де&shy;таль&shy;но. В на&shy;сто&shy;я&shy;щий мо&shy;мент при&shy;ло&shy;же&shy;ние уме&shy;ет не мень&shy;ше сво&shy;е&shy;го ори&shy;ги&shy;наль&shy;но&shy;го бра&shy;та от ян&shy;дек&shy;са. Так в чем про&shy;фит, %username%? Про&shy;фит в том, что все это client-side, на&shy;пи&shy;са&shy;но и ра&shy;бо&shy;та&shy;ет на JavaScript, HTML + CSS3, до&shy;бав&shy;лять&shy;ся мо&shy;жет лю&shy;бой функ&shy;ци&shy;о&shy;нал, ка&shy;кой ду&shy;ша по&shy;же&shy;ла&shy;ет. А фей&shy;лы есть? Есть, без фей&shy;лов в на&shy;ше вре&shy;мя ни&shy;ку&shy;да, по&shy;ка что все ра&shy;бо&shy;та&shy;ет с за&shy;мет&shy;ны&shy;ми тор&shy;мо&shy;за&shy;ми, что в прин&shy;ци&shy;пе не ме&shy;ша&shy;ет ис&shy;поль&shy;зо&shy;ва&shy;нию. На 3GS, ду&shy;маю, долж&shy;но во&shy;об&shy;ще иде&shy;аль&shy;но ид&shy;ти, те&shy;сти&shy;ро&shy;ва&shy;лось и пи&shy;са&shy;лось на 3G. Еще од&shy;ним фей&shy;лом яв&shy;ля&shy;ет&shy;ся landscape-ре&shy;жим, мне по&shy;ка лень его до&shy;де&shy;лы&shy;вать, по&shy;это&shy;му отоб&shy;ра&shy;жа&shy;ет&shy;ся при по&shy;во&shy;ро&shy;те экра&shy;на все смеш&shy;но, не&shy;удоб&shy;но и не&shy;про&shy;пор&shy;ци&shy;о&shy;наль&shy;но. Ис&shy;прав&shy;лю в бли&shy;жай&shy;шее вре&shy;мя. В пла&shy;нах - до&shy;бав&shy;ле&shy;ние из&shy;бран&shy;но&shy;го, про&shy;клад&shy;ки марш&shy;ру&shy;та меж&shy;ду 2-мя точ&shy;ка&shy;ми и т.п.</p><p></p><p><strong>Осо&shy;бен&shy;но&shy;сти на&shy;ци&shy;о&shy;наль&shy;ной ебал&shy;ки</strong>: нуж&shy;но от&shy;дать долж&shy;ное js про&shy;грам&shy;ми&shy;стам ян&shy;дек&shy;са - код их карт и <a href="http://api.yandex.ru/maps/doc/">до&shy;ку&shy;мен&shy;та&shy;ция</a> API на&shy;пи&shy;са&shy;ны очень хо&shy;ро&shy;шо и на ай&shy;фо&shy;не все за&shy;пус&shy;ка&shy;ет&shy;ся без про&shy;блем с един&shy;ствен&shy;ным но: мо&shy;биль&shy;ный safari не зна&shy;ет та&shy;ких дей&shy;ствий, как mousedown, mouseup, mousemove, что де&shy;ла&shy;ет drag-n-drop про&shy;крут&shy;ку кар&shy;ты не&shy;воз&shy;мож&shy;ной. В <a href="http://developer.apple.com/safari/library/documentation/AppleApplications/Reference/SafariWebContent/Introduction/Introduction.html">офи&shy;ци&shy;аль&shy;ной до&shy;ку&shy;мен&shy;та&shy;ции</a> раз&shy;ра&shy;бот&shy;чи&shy;ка web при&shy;ло&shy;же&shy;ний от Apple опи&shy;сы&shy;ва&shy;ют сле&shy;ду&shy;ю&shy;щие по&shy;хо&shy;жие event-ы: touchstart, touchchange, touchend, ко&shy;то&shy;рые по су&shy;ти яв&shy;ля&shy;ют&shy;ся ана&shy;ло&shy;га&shy;ми мы&shy;ши&shy;ных со&shy;бы&shy;тий с од&shy;ним ис&shy;клю&shy;че&shy;ни&shy;ем, это "мно&shy;го&shy;паль&shy;це&shy;вость" - в callback функ&shy;цию воз&shy;вра&shy;ща&shy;ет&shy;ся event с па&shy;ра&shy;мет&shy;ром-мас&shy;си&shy;вом touches, где каж&shy;дый эле&shy;мент яв&shy;ля&shy;ет&shy;ся обыч&shy;ным mousevent. В ито&shy;ге все ре&shy;ши&shy;лось обыч&shy;ным initMouseEvent - dispatchEvent для кон&shy;тей&shy;не&shy;ра я.карт, то бишь, от&shy;лав&shy;ли&shy;ва&shy;ем touchstart, бе&shy;рем из не&shy;го пер&shy;вый эле&shy;мент и вы&shy;зы&shy;ва&shy;ем c его зна&shy;че&shy;ни&shy;я&shy;ми mousedown . Для safari mobile есть еще 3 не&shy;обыч&shy;ных ти&shy;па со&shy;бы&shy;тий - gesturestart, gestureend, gesturechange, ко&shy;то&shy;рые вы&shy;зы&shy;ва&shy;ют&shy;ся при вы&shy;пол&shy;не&shy;ний стан&shy;дарт&shy;ных для ай&shy;фо&shy;на дви&shy;же&shy;ний: щи&shy;па&shy;ния для зу&shy;ма ли&shy;бо же вра&shy;ще&shy;ния 2-мя паль&shy;ца&shy;ми. На них бы&shy;ло успеш&shy;но на&shy;ве&shy;ше&shy;но уве&shy;ли&shy;че&shy;ние\умень&shy;ше&shy;ние мас&shy;шта&shy;ба кар&shy;ты и скры&shy;тие ме&shy;ню. Еще од&shy;ной про&shy;бле&shy;мой яв&shy;ля&shy;лось то, что dblclick не под&shy;дер&shy;жи&shy;вал&shy;ся, яв&shy;ля&shy;ясь си&shy;стем&shy;ным дей&shy;стви&shy;ем для ай&shy;фо&shy;на, при&shy;шлось эму&shy;ли&shy;ро&shy;вать, ра&shy;с&shy;чи&shy;ты&shy;вая ми&shy;кро&shy;тайм меж&shy;ду дву&shy;мя при&shy;кос&shy;но&shy;ве&shy;ни&shy;я&shy;ми к экра&shy;ну. Вот соб&shy;ствен&shy;но и все по осо&shy;бен&shy;но&shy;стям javascript-ов для ай&shy;фо&shy;на, все осталь&shy;ное - ру&shy;ти&shy;на. По&shy;след&shy;нюю вер&shy;сию ко&shy;да мож&shy;но по&shy;смот&shy;реть <a href="/media/ymapw/ymw.js">тут</a>. Ни&shy;ка&shy;кие <a href="http://api.yandex.ru/maps/agreement.xml">ли&shy;цен&shy;зии</a> сво&shy;и&shy;ми дей&shy;стви&shy;я&shy;ми мы не на&shy;ру&shy;ша&shy;ем, т.к. кар&shy;ты отоб&shy;ра&shy;жа&shy;ют&shy;ся имен&shy;но в веб-при&shy;ло&shy;же&shy;нии и ни&shy;ка&shy;кие мо&shy;ди&shy;фи&shy;ка&shy;ции ко&shy;да не про&shy;во&shy;ди&shy;лись.</p>
		</div>

		<hr>
		
		<div class="content_footer hidden-print">
			<p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться радостью со своими воображаемыми друзьями в социальных сетях: <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A//www.mindcollapse.com/blog/214.html">фейсбук</a>, <a target="_blank" href="http://twitter.com/share?url=http%3A//www.mindcollapse.com/blog/214.html&amp;text=Yandex%20Maps%20%D0%B4%D0%BB%D1%8F%20iPhone%20%28YaMap%20Web%29&amp;via=middlesizetit">твиттер</a>, <a target="_blank" href="http://vkontakte.ru/share.php?url=http%3A//www.mindcollapse.com/blog/214.html">вконтакте</a></span>.</p>
		</div>
	</div>

    </div>

    <!-- Yandex.Metrika counter --><script type="text/javascript">(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter22151810 = new Ya.Metrika({id:22151810, clickmap:true, trackLinks:true, accurateTrackBounce:true}); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="//mc.yandex.ru/watch/22151810" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->      
</body>

</html>