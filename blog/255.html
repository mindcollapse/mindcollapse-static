<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">

    <title>Знакомство и мысли о Google App Engine</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="jm8IGIWg4dsm0cTmih0sIVnUaWibc_hpOiQOlqb--9Y"> 
    <meta name="yandex-verification" content="4b85f46617ab1114"> 
    <meta name="y_key" content="04bed234d6a405cc"> 
    <meta name="msvalidate.01" content="62188F55275960794DDFA698C3EA9F05">

    <link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.ru">
    <link rel="sitemap" href="https://www.mindcollapse.com/blog/sitemap.xml">

    
        <link rel="canonical" href="https://www.mindcollapse.com/blog/255.html">

        
            <link rel="next" href="https://www.mindcollapse.com/blog/254.html">
        

        
            <link rel="prev" href="https://www.mindcollapse.com/blog/256.html">
        

        <meta property="og:title" content="Знакомство и мысли о Google App Engine">
        <meta property="og:description" content="Возможно, данная статья должна была увидеть свет где-то год, а то и два года тому назад, а в наши с вами времена покорения космоса подобные размышления уже отдают не первой свежестью, но, тем не менее, только теперь у меня появилось время опробовать платформу ...">
        <meta property="og:type" content="article">
        <meta property="og:site_name" content="mindcollapse.com">
        <meta property="og:url" content="https://www.mindcollapse.com/blog/255.html">

        <meta name="description" content="Возможно, данная статья должна была увидеть свет где-то год, а то и два года тому назад, а в наши с вами времена покорения космоса ...">

        <meta name="twitter:creator" content="@middlesizetit">
        <meta name="twitter:description" content="Возможно, данная статья должна была увидеть свет где-то год, а то и два года тому назад, а в наши с вами времена покорения космоса подобные размышления уже отдают не первой ...">
        <meta name="twitter:title" content="Знакомство и мысли о Google App Engine">

        
            <meta name="twitter:card" content="summary">
        
    

    <link rel="publisher" href="https://plus.google.com/110904145311662435301">
    <link rel="icon" href="https://www.mindcollapse.com/favicon.ico" type="image/vnd.microsoft.icon">
    <link rel="alternate" type="application/atom+xml" title="RSS лента mindcollapse.com" href="https://www.mindcollapse.com/blog.xml"> 

    
        <link href="/static/compiled/blog.css?47e4fb13" rel="stylesheet" media="all">
    

    
        <script type="text/javascript" async src="/static/compiled/blog.js?c6c1320e"></script>
    

    <!--[if lt IE 9]>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2/html5shiv.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.js"></script>
    <![endif]-->
</head>

<body class="mindcollapse">
    <main class="container">
        <header class="header navbar navbar-default hidden-print">
            <nav class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".blogmenu">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a href="/" class="navbar-brand">Владимир Смирнов</a>
            </nav>

            <nav class="collapse navbar-collapse blogmenu" role="navigation">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="/">Блог</a></li>
                    <li ><a href="/blog/archive/">Архив</a></li>
                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a target="_blank" href="https://twitter.com/middlesizetit">Twitter</a></li>
                    <li><a target="_blank" href="https://github.com/mindcollapse">GitHub</a></li>
                    <li><a href="https://www.mindcollapse.com/blog.xml">RSS</a></li>
                </ul>
            </nav>
        </header>

        
    <article class="article hentry" itemscope itemtype="http://schema.org/Article" role="main">
        <div class="content_header clearfix">
            <div itemprop="name" class="entry-title pull-left">
                <h1><a itemprop="url" href="https://www.mindcollapse.com/blog/255.html">Знакомство и мысли о Google App Engine</a></h1>
            </div>

            <div class="published pull-right">
                <time itemprop="datePublished" datetime="2011-04-16T00:00:00Z" class="text-muted updated">16 апреля 2011 г.</time>
            </div>

            <div class="vcard author hidden">
                <a itemprop="author" class="url fn" href="http://www.mindcollapse.com/">Vladimir Smirnov</a>
            </div>
        </div>

        <hr class="first">

        <div itemprop="description" class="entry-content content">
            Воз­мож­но, дан­ная ста­тья долж­на бы­ла уви­деть свет где-то год, а то и два го­да то­му на­зад, а в на­ши с ва­ми вре­ме­на по­ко­ре­ния кос­мо­са по­доб­ные раз­мыш­ле­ния уже от­да­ют не пер­вой све­же­стью, но, тем не ме­нее, толь­ко те­перь у ме­ня по­яви­лось вре­мя опро­бо­вать плат­фор­му гугла под раз­ра­бот­ку ре­сур­со­ем­ких при­ло­же­ний в об­ла­ках и по­вос­хи­щать­ся ее воз­мож­но­стя­ми и про­ду­ман­но­стью. Я не бу­ду де­таль­но оста­нав­ли­вать­ся на опи­са­нии са­мой тех­но­ло­гии, об этом тон­ны книг и ты­ся­чи бло­гов уже на­пи­са­ли, а лишь рас­ска­жу о плю­сах и не­до­стат­ках, ну и в кон­це по­ста - при­ве­ду при­мер и код ре­аль­но ра­бо­та­ю­ще­го при­ло­же­ния. Ска­жу сра­зу, до зна­ком­ства с Google App Engine у ме­ня уже был на­коп­лен зна­чи­тель­ный опыт ра­бо­ты в об­лач­ных сер­ви­сах, пре­иму­ще­ствен­но от ком­па­ний Amazon и Rackspace, а зна­чит срав­ни­вать мне есть с чем, хо­тя срав­не­ние тут не осо­бо умест­но. Если вам все же лень чи­тать опи­са­ние всех этих кла­уд ком­пью­тин­гов, то по­ста­ра­юсь объ­яс­нить про­сто. Гугл предо­став­ля­ет свою плат­фор­му, что-то вро­де обыч­но­го ша­ред хо­стин­га или го­то­вый environment ско­рее, на ко­то­ром уже уста­нов­ле­ны прак­ти­че­ски пол­но­функ­ци­о­наль­ная вер­сии Python и зна­чи­тель­но ку­цая вер­сия Java, ко­то­рые&nbsp;об­ве­ша­ны свер­ху раз­ным API от гугла, в част­но­сти это ин­тер­фей­сы хра­не­ния би­нар­ных дан­ных в BlobStorage, хра­не­ния та­блич­ных дан­ных (как слож­но пи­сать тех. ста­тью на рус­ском, table data все же зву­чит как-то при­выч­ней) в по­до­бии (еще раз, по­до­бии, relation-ы тут ре­а­ли­зу­е­мы с по­мо­щью ре­фе­рен­сов, а это не со­всем то) ре­ля­ци­он­ной БД ин­те­рес­но объ­еди­нен­ной с key-value сто­ре­джем в ви­де DataStorage, свой UrlFetch, своя ре­а­ли­за­ция cron-а и мно­гое дру­гое. Ли­ми­та­ми же яв­ля­ют­ся пол­ное read-only опе­ра­ций с фай­ло­вой си­сте­мой и опре­де­лен­ные огра­ни­че­ния в ис­поль­зо­ва­нии си­стем­ных ре­сур­сов в ви­де про­цес­сор­но­го вре­ме­ни, тра­фи­ка и та­ко­го про­че­го, что, впро­чем, сто­ит су­щие ко­пей­ки и эле­мен­тар­но до­ку­па­ет­ся при пер­вой на­доб­но­сти и при­ме­ни­мо к ана­ло­гам-кон­ку­рен­та. Что ка­са­е­мо то­го же Amazon EC2 или Mosso Rackspace, то вы по­лу­ча­е­те свой instance в ви­де го­лой опе­ра­ци­он­ной си­сте­мы, ко­то­рую долж­ны на­стро­ить и за­пу­стить свой сер­вис на ней. Яв­ля­ет­ся ли это пре­иму­ще­ством? Од­но­знач­но, ведь вы, по су­ти, огра­ни­че­ны толь­ко ма­те­ри­аль­но и, как след­ствие из пер­во­го ре­сур­са, ли­ми­та­ми об­лач­ной ма­ши­ны, ко­то­рую са­ми и ку­пи­ли ку­пи­ли. К то­му же, пе­ре­но­си­мость про­ек­та на ама­зо­нов­ских или рэкс­пей­сов­ских об­ла­ках не со­зда­ет ни­ка­ких про­блем, в то вре­мя, как GAE - уни­каль­ная в сво­ем ро­де плат­фор­ма и без кар­ди­наль­ной сме­ны ко­да вы ни­ку­да от нее не уй­де­те (нет, уй­ти то ко­неч­но мож­но, но не да­ле­ко и на <a href="http://appscale.cs.ucsb.edu/">ко­сты­лях</a>). Вот тут на са­мом де­ле вам мо­жет се­рьез­но при­го­дит­ся MVC пат­терн для вы­не­се­ние мо­де­ли вне ло­ги­ки, на вся­кий по­жар­ный. Что же до не­до­стат­ков ама­зо­нов­ских ила­сти­ков - есть и та­кие. В част­но­сти, не­об­хо­ди­мость на­строй­ки про­грамм­но­го обес­пе­че­ния, его оп­ти­ми­за­ции и на­ли­чие про­клад­ки в ви­де ОС меж­ду мас­си­вом об­ла­ков с вир­ту­а­ли­за­ци­ей и про­цес­сом поль­зо­ва­те­ля да­ет мень­шее бы­стро­дей­ствие. Но, как я уже го­во­рил, плат­фор­мы аб­со­лют­но раз­ные. Если GAE - толь­ко веб при­ло­же­ния, то AEC2 - все, что мож­но за­пу­стить в linux\windows окру­же­нии. Если во­об­ще про­стым язы­ком го­во­рить, то в слу­чае с GAE вы ра­бо­та­е­те на строй­ке, где уже го­тов фун­да­мент и мож­но стро­ить что хо­чешь, но толь­ко кир­пи­ча­ми и це­мен­том гугла, ко­то­рые стро­го&nbsp;огра­ни­че­ны&nbsp;и за пре­вы­ше­ния квот нуж­но пла­тить, за­то фун­да­мент на­столь­ко креп­кий, что не рух­нет да­же при зем­ле­тря­се­нии, т.к. вы­стро­ен про­фес­си­о­на­ла­ми, то в AEC и иже с ним у вас есть пло­щад­ка зем­ли, вы мо­же­те за­ве­сти те же кир­пи­чи, вы­рыть кот­ло­ван, по­стро­ить дом, но нет ни­ка­ких га­ран­тий, что он не рух­нет от вет­ра по­то­му что вы за­бы­ли до­ме­шать пе­сок в це­мент или ваш root па­роль брут­фор­сит­ся за пол ча­са. За­то на этой же зем­ле мож­но ни­че­го и не стро­ить, а за­са­дить все цве­та­ми. В то вре­мя, как с гуглом та­кой но­мер не прой­дет.<p>Су­ще­ству­ют и бо­лее се­рьез­ные не­до­стат­ки GAE, как, на­при­мер, не­воз­мож­ность при­вя­зать к сво­е­му при­ло­же­нию naked до­мен. Ну в смыс­ле без саб­до­ме­на www, все это свя­за­но с тех­ни­че­ской осо­бен­но­стью, ко­гда load balancing осу­ще­ствля­ет­ся с по­мо­щью на­прав­ле­ния всех за­про­сов че­рез CNAME ghs.google.com, а CNAME не мо­жет быть при­леп­лен вме­сто глав­ное A за­пи­си. При­хо­дит­ся де­лать фит­ны уша­ми и ис­кать до­пол­ни­тель­ные www-лай­зе­ры или url-фор­вар­де­ры, ко­то­рые бу­дут пе­ре­на­прав­лять все за­про­сы с го­ло­го до­ме­на на www, что са­мо по се­бе про­ти­во­ре­чит идее рас­пре­де­ле­ния на­гру­зок, все эти саб­до­ме­ны - прош­лый век, как по мне. Еще есть не­ко­то­рые глу­пые ли­ми­ты ка­са­е­мо мак­си­маль­но­го кус­ка дан­ных, по­лу­ча­е­мо­го urlfetch за раз, ли­мит вре­ме­ни ис­пол­не­ния в 30 се­кунд, до­ста­точ­но бо­ро­да­тая вер­сия пи­то­на и django, кри­вая ре­а­ли­за­ция сес­сий и мно­го дру­гих спор­ных мо­мен­тов. Впро­чем, в от­ли­чии от кон­ку­рен­тов, гугл да­ет нам бес­плат­ный ак­каунт с кво­та­ми, ко­то­рых хва­тит для ма­ло­маль­ско­го при­ло­же­ния с го­ло­вой, ли­шая нас про­блем с бе­ка­пом дан­ных, по­сто­ян­ны­ми об­нов­ле­ни­я­ми сер­вер­но­го ПО, пе­ре­жи­ва­ни­я­ми по по­во­ду но­вой уяз­ви­мо­сти в apache или mysql, provision control (тут он хоть и при­ми­тив­ный, но удоб­ный деплой с воз­мож­но­стью за­пус­ка не­сколь­ких вер­сий при­ло­же­ния на раз­ных саб­до­ме­нах ап­пс­по­та) и та­ко­го про­че­го.&nbsp;Ну, по­жа­луй, хва­тит пе­ре­ли­вать из пу­сто­го в по­рож­нее. Вер­нем­ся к ре­аль­но­му при­ме­не­нию плат­фор­мы GAE. У ме­ня есть свой уко­ра­чи­ва­тель ссы­лок, ко­то­рый кру­тит­ся на до­ме­не mclnk.me. Про­сто од­на­жды бы­ли у ме­ня сер­ти­фи­кат на сво­бод­ный до­мен и мно­го вре­ме­ни, а хо­те­лось ссыл­ку ко­ро­че бит­ли и с про­смот­ром кон­тен­та ти­па ро­ли­ков юту­ба и кар­ти­нок. До не­дав­не­го вре­ме­ни, она (об­ре­зал­ка, уко­ра­чи­вал­ка - как хо­ти­те), как и весь этот блог, бы­ла на­пи­са­на на PHP и ку­шать осо­бо не про­си­ла, но, пу­тем слу­чай­но­го вы­бо­ра, ста­ла кан­ди­да­том на пе­ре­нос се­бя в об­ла­ка Google. В ка­че­стве язы­ка ре­а­ли­за­ции я вы­брал Python. Он мне нра­вит­ся с мо­мен­та да­ле­ко зна­ком­ства в его быт­но­сти еще сы­рым язы­ком пер­вых вер­сий, имен­но на дан­ном ин­стру­мен­те долж­ны учить про­грам­ми­ро­вать сту­ден­тов, а не за­со­рять их го­ло­вы бей­си­ка­ми да па­ска­ля­ми. Пи­тон учит ла­ко­нич­но­сти, пра­виль­ной раз­мет­ке ко­да и дзе­ну про­грам­ми­ро­ва­ния. А вот вто­рой ва­ри­ант, Java, мною не­лю­бим за его из­бы­точ­ность. Нет, я ко­неч­но по­ни­маю, что это обу­слов­ле­но ис­клю­чи­тель­но до­бры­ми по­бу­жде­ни­я­ми и ми­ни­ми­зи­ру­ет ве­ро­ят­ность воз­ник­но­ве­ния оши­бок ис­пол­не­ния в даль­ней­шем, но пи­сать не­сколь­ко экра­нов ко­да для эле­мен­тар­но­го функ­ци­о­на­ла при огра­ни­чен­ных ре­сур­сах вре­ме­ни, не се­дых по­ка еще во­лос и энер­ге­ти­ков мне не ка­жет­ся це­ле­со­об­раз­ным. Код при­ло­же­ния вы­гля­дит <a href="/media/copypaste/main.py">по­доб­ным об­ра­зом</a>, про­шу про­ще­ния, что все на­ва­ле­но в ку­чу и па­ру раз я схал­ту­рил (как при про­вер­ке ва­лид­но­сти ссыл­ки, на­при­мер), но де­ла­лось это в пря­мом смыс­ле на ко­лен­ке ле­вой ру­кой. Уко­ра­чи­ва­тель ссы­лок пуб­лич­но до­сту­пен по ад­ре­су <a href="http://mclnk.me">http://mclnk.me</a>, а ре­зуль­тат об­ре­за­ния вы­гля­дит по­доб­ным об­ра­зом&nbsp;<a href="http://www.mclnk.me/e">http://mclnk.me/e</a>.</p><p>В ка­че­стве за­клю­че­ния, у GAE есть своя ни­ша, ведь до­ста­точ­но мощ­ный RDS (lighttpd + php-fcgi + mysql на дру­гом хо­сте) на­чи­нал за­хле­бы­вать­ся с la под 2 при ab -n 1000 -c 500, а вот google hosted про­гло­тил и да­же не по­да­вил­ся, под­няв 25 ин­стан­сов для об­ра­бот­ки за­про­сов и от­дав все без ди­ле­ев (речь сей­час не об link shortener, ра­зу­ме­ет­ся). Мно­го по­ка еще не хва­та­ет, тот же Google Storage, ко­то­рый сей­час толь­ко по ин­вай­там и, если ве­рить слу­хам, дол­жен стать се­рьез­ным кон­ку­рен­там Amazon S3, но Roadmap про­ек­та вну­ша­ет хо­ро­шие на­де­жды в свет­лое бу­ду­щее. По­ду­май­те толь­ко об од­ном, а нуж­но ли вам это? Или пусть даль­ше ваш уют­нень­кий бло­жек жи­вет на хо­стин­ге по $3 в ме­сяц? Я же про­сто по­про­бо­вал это just for fun и ре­шил для се­бя, что сле­ду­ю­щий круп­ный про­ект с уве­рен­но­стью мож­но под­ни­мать на плат­фор­ме Google App Engine,&nbsp;сэко­но­мив день­ги, нер­вы и бес­цен­ное вре­мя.&nbsp;</p>
        </div>
    </article>

    <hr>

    <footer class="footer hidden-print">
        <p>Что делать, если вы все прочитали и вам понравилось? Можете посмотреть мои остальные статьи в <a href="/blog/archive/">архиве</a> или поделиться ссылкой в <span class="social"><a target="_blank" href="http://www.facebook.com/sharer.php?u=https%3A//www.mindcollapse.com/blog/255.html">фейсбуке</a>, <a target="_blank" href="http://twitter.com/share?url=https%3A//www.mindcollapse.com/blog/255.html&amp;text=%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE%20%D0%B8%20%D0%BC%D1%8B%D1%81%D0%BB%D0%B8%20%D0%BE%20Google%20App%20Engine&amp;via=middlesizetit">твиттере</a> или <a target="_blank" href="http://vkontakte.ru/share.php?url=https%3A//www.mindcollapse.com/blog/255.html">в контакте</a></span>.</p>
    </footer>

    </main>
</body>

</html>