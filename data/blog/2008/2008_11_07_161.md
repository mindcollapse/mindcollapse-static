Данная запись является логическим продолжением "<a href="/blog/159.html">Linux: оптимизируем SSD</a>", только в этот раз описываются твики для Windows. Начну, как обычно, с предыстории. Одна моя хорошая и невнимательная знакомая, прочитав у меня про все <a href="/blog/142.html">преимущества</a> Acer Aspire One и совсем забыв посмотреть на его <a href="/blog/149.html">недостатки</a>, взяла себе аналогичную модель (а может просто зажала переплачивать за 150-ю версию с HDD и WinXP). И все было бы хорошо, но через пару недель мне на телефон позвонили и с дрожью в голосе сообщили, что предустановленному <a href="http://www.linpus.com/">Linpus</a>-у наступил логический пиздец, а вообще он был некрасивый и теперь барышня Windows-а желает. Все попытки переубедить в пользу Ubuntu и других дистрибутивов встретились во штыки и поэтому я, такой добрый и отзывчивый идиот, взял себе ноутбук с обещанием установить на него обычный Windows XP. Идея была очень даже дрянная, Microsoft <a href="http://news.ferra.ru/hard/2008/11/06/82745/">обещали</a> реализовать нормальную работу на твердотельных накопителях только к седьмой версии своего детища, а пока все работает из рук вон плохо. "А вдруг прокатит" - по старой привычке подумал я. Увы, не прокатило, ставилось все часа 4, запускалось минуты 4 и работало как P486. Первой попыткой ускорить работу была идея провести аналогию с Linux, точнее в tmpfs. В окнах это называется ramdisk и реализуется с помощью кучи программного обеспечения, среди которого мне приглянулся <a href="/media/etc/post161/ramdisk.zip">Gavotte Ramdisk</a> своей бесплатностью и наличием GUI. К сожалению, ни отключение файла подкачки и восстановления системы, ни перенос директории TEMP на этот самый ramdisk, ни копирование директории пользователя на SDHC карту особого результата не принесли - тормозило все ужас как безбожно. Windows каждую минуту умудрялся пописывать всякие глупости на жесткий диск, уменьшая время отклика и увеличивая физический износ и без того капризного Solid State Drive.Неожиданно на помощь пришла утилита от самих мелкомягких. Называется <a href="http://www.microsoft.com/windowsembedded/ru-ru/">Microsoft Windows XP Embedded</a> SP2 Feature Pack. За этим труднопроизносимым названием скрывается набор утилит для улучшения работы ОС на встраиваемой технике, к примеру, всякие там системы "умный дом", бортовые компьютеры машин, банкоматы, терминалы, где очень часто используется SSD память для уменьшения энергопотребления, тепловыделения и шумности работы. Из кучи набора утилит нас интересует только <a href="http://msdn.microsoft.com/en-us/library/ms838511.aspx">EWF</a> (Enhanced Write Filter). Если в двух словах (подробнее на <a href="http://msdn.microsoft.com/en-us/library/ms912915.aspx">msdn</a> либо же в <a href="http://support.microsoft.com/kb/814257">support center</a>), то при использовании данного системного модуля между диском и программами создается некоторого рода буферная зона в RAM (на самом деле не только в оперативной памяти, но нас интересует именно этот вариант). ПО совершает всю свою стандартную рутину, не подозревая, что все файловые операции записи проходят не на диск, а в быструю энергозависимую память. После завершения работы системы все изменения могут быть перенесены на диск, ну ли просто аннулированы. Это дает нам несколько преимуществ: во-первых система остается стерильной - установили все ПО, запустили EWF, отключили commit изменений и каждый раз после перезагрузки получаете чистенькую ОС, во-вторых вместо записи на диск все пишется в RAM, а это дает нихуйовый прирост производительности даже на обычных hd, не говоря уже о SSD. Есть разумеется и минусы: отъедается оперативная память пропорционально количеству изменений, ну и увеличивается время выключения до 3-5 минут при записи изменений на диск из буферной зоны. Ну а теперь детальней о реализации этого на вашем компьютере с Windows XP SP2, а лучше SP3. Сперва качаем <a href="/media/etc/post161/ewftool.zip">EWF Tool</a>, которая сделает за вас всю рутину, описанную на сайте <a href="http://granturing.blogspot.com/">GranTuring</a>. Просто нажимаем "Install EWF Support" и "Minimize Disk Writes", после этого скрещиваем пальцы и перезагружаемся. Если все пройдет нормально, то вы ничего не заметите даже, если нет - BSOD, а это значит, что вы хронический неудачник и лучше бы умереть. Правда и это не страшно, просто восстанавливаем ntldr в корне диска C: из файла ntldr.bak. Вот и все, управление осуществляется с помощью консольного приложения ewfmgr (читаем /help), либо же из треи с помощью утилиты <a href="/media/etc/post161/jf_AutoHotkey.exe">jf_autohotkey</a>. После произведенных операций вы получите систему с которой комфортно работать, только не забудьте вынести профиль пользователя на карту памяти, иначе будете терять все настройки после перезагрузки ОС.