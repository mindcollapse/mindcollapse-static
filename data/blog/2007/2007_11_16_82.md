Наверное, самыми мерзкими изобретениями человечества после фалоимитаторов, безалкогольного пива и мусульманских любовных сериалов является спам. (банально прозвучало, imho) Так случилось, что сервер, за который я ответственен, посетила печальная участь - ip был занесен в RBL и половина всех писем блокировались при релее. А учитывая то, что на сервере работало с 10 сайтов, это вполне можно было назвать катастрофой. Рассылка происходила с помощью php mail (), тобишь топорным, но действенным способом. А учитывая то, что suexec был отключен, - все письма уходили от дефолтного юзера apache - nobody@blah-blah-blah. Проблема так же состояла в том, что сервер был черезвычайно посещаем, а значит прочесывание аксес логов апача на предмет множества POST или GET запросов к одному скрипту - не подходил.Собственно, после долгих мучений и <a href="http://google.com">гуглоковыряний</a> был найден способ - <a href="http://www.lancs.ac.uk/~steveb/patches/php-mail-header-patch/">php mail header patch</a>.Но, матьперемать, на сервере установлен <a href="http://cpanel.net">СPanel</a>, и поэтому, вариант с patch -p1 на сырцы <em>/home/cpapachebuild/</em>, а опосля сборка посредством <em>/scripts/easyapache</em> не катила, мерзкий спаниель каждый раз скачивал со своего сервера тарбол php и именно его собирал, а значит и патч терялся.Шел второй час <a href="http://google.com">гуглоковыряний</a> и было найдено решение от <a href="http://choon.net/php-mail-header.php">Choon</a>, который любезно предоставил патч вышеупомянутого решения для cpanel. Короче, обрадовало это неимоверно, мучениям пришел конец, спамерский скрипт был отловлен, а клиент получил по ушам, за то что раздавал свои пароли от FTP аккаунта на лево и на право. Мораль сей басни такова - добавляем <em>disable_functions=mail</em> в <em>php.ini</em> : пусть тупорылые программисты выучат заветные 4 буквы <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> и юзают кучу велосипедов, написанных для работы с этим протоколом. 